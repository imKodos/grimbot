{"version":3,"file":"kendo.list.js","names":["__meta__","id","name","category","depends","hidden","$","undefined$1","kendo","window","ui","outerHeight","_outerHeight","percentageUnitsRegex","Widget","keys","support","htmlEncode","activeElement","_activeElement","outerWidth","_outerWidth","ObservableArray","data","ID","CHANGE","FOCUSED","HOVER","KSELECTED","LOADING","LIST_UL","FIXED_GROUP_HEADER","ITEMSELECTOR","OPEN","CLOSE","CASCADE","SELECT","CLICK","MOUSEENTER","ACTIVATE","DEACTIVATE","DATA_BINDING","DATA_BOUND","SELECTED_ITEM_CHANGE","SELECTED","REQUESTSTART","REQUESTEND","FOCUS","extend","isArray","Array","browser","HIDDENCLASS","WIDTH","TEXT","isIE","msie","quotRegExp","alternativeNames","ComboBox","DropDownList","MultiColumnComboBox","ARIA_LABELLEDBY","ARIA_LABEL","ARIA_ACTIVEDESCENDANT","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_BUSY","ARIA_SELECTED","GROUP_ROW_SEL","List","DataBoundWidget","init","element","options","that","this","fn","call","_isSelect","is","length","dataSource","dataTextField","dataValueField","_listSize","cssProperties","getValidClass","widget","propName","value","size","ul","attr","tabIndex","list","addClass","append","guid","columns","removeClass","_columnsHeader","_header","_noData","_footer","_accessors","_initValue","valuePrimitive","footerTemplate","headerTemplate","noDataTemplate","messages","noData","clear","setOptions","enable","enabled","_renderFooter","_renderNoData","label","_inputLabel","_unwrapFloating","remove","_label","focus","_focused","trigger","readonly","_editable","disable","floatingLabel","labelOptions","isPlainObject","content","Label","floatCheck","_floatCheck","bind","listView","text","popup","visible","_refreshFloatingLabel","refresh","header","template","_angularElement","destroy","parent","before","columnsHeader","colGroup","row","idx","currentColumn","title","field","columnsHeaderTemplate","currentWidth","width","currentWidthInt","parseInt","widthStyle","isNaN","test","prepend","angular","elements","appendTo","footer","footerEl","_listOptions","currentOptions","virtual","changeEventOption","change","_listChange","listBoundHandler","_listBound","focusedElm","inputId","labelElm","labelledBy","_generateLabelId","autoBind","selectable","click","_click","activate","_activateItem","deactivate","_deactivateItem","dataBinding","dataBound","height","groupTemplate","fixedGroupTemplate","ariaLabel","ariaLabelledBy","listSize","expr","$angular","_initList","listOptions","selectedItemChange","VirtualList","StaticList","_setListValue","done","_updateSelectionState","noop","_listMousedown","e","filterInput","target","preventDefault","_isFilterEnabled","filter","_hideClear","_clear","_showClear","_clearValue","_clearText","_accessor","_customOption","enforceMinLength","_filter","word","open","highlightFirst","_change","_clearFilter","bound","_filterSource","force","isMultiColumnFiltering","filterFields","logic","filters","expression","resetPageSettings","removed","removeFiltersForField","_clearFilterExpressions","Deferred","reject","promise","newExpression","push","_pushFilterExpression","isValidFilterExpr","concat","_cascading","setDSFilter","dataSourceState","page","pageSize","sort","group","aggregate","_mergeState","filtersToRemove","i","splice","action","html","instance","_toggleNoData","show","toggle","_toggleHeader","prev","children","first","_allowOpening","flatView","val","_old","_ignoreCase","model","reader","fields","type","ignoreCase","_focus","candidate","widgetOptions","fromFilter","_buildExpression","_open","accentFoldingFiltering","toLocaleLowerCase","toLowerCase","operator","_clearButton","clearTitle","role","clearButton","search","_inputValue","clearTimeout","_typingTimeout","minLength","_state","_emptySearch","trim","_searchByWord","current","items","ns","_unbindDataSource","off","_form","_resetHandler","dataItem","index","selectedDataItems","getByUid","add","removeAttr","getter","textField","valueField","_text","_value","_aria","autocomplete","suggest","_ariaLabel","_blur","close","_userTriggered","_isValueChanged","unifyType","selectedIndex","optionValue","_valueBeforeCascade","_oldIndex","isFiltered","_typing","typing","_data","view","_enable","disabled","_dataValue","_offsetHeight","offsetHeight","prevAll","each","_height","popups","isMccb","closest","hide","scrollHeight","_openHandler","_adjustListWidth","computedStyle","computedWidth","style","wrapper","getComputedStyle","parseFloat","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","css","fontFamily","autoWidth","minWidth","whiteSpace","_closeHandler","_focusItem","noFocusedItem","last","select","scrollToIndex","_calculateGroupPadding","li","groupHeader","padding","direction","display","scrollbar","parents","_calculatePopupHeight","_calculateColumnsHeaderPadding","isRtl","_refreshScroll","enableYScroll","overflowX","overflowY","_resizePopup","one","_popup","wrap","Popup","anchor","animation","autosize","on","_toggleHover","currentTarget","toggleClass","_toggle","preventFocus","touchEnabled","mobileOS","touch","MSPointers","pointers","_prevent","_triggerCascade","_cascadeTriggered","_cascadedValue","userTriggered","_triggerChange","unbind","_requestStartHandler","_requestEndHandler","_errorHandler","requireValueMapper","valueMapper","Error","toString","Boolean","Number","inArray","node","parentNode","siblings","Select","_initial","setDataSource","_dataSource","_initialIndex","_current","fetch","_parentWidget","_cascadeSelect","_select","_cascadeValue","_accessorInput","_accessorSelect","getSelectedOption","selected","_custom","_syncValueAndText","custom","_hideBusy","_busy","_arrowIcon","_showBusy","isDefaultPrevented","_request","setTimeout","_requestEnd","DataSource","create","_firstItem","focusFirst","_lastItem","focusLast","_nextItem","focusNext","_prevItem","focusPrev","_getNormalizedDataItem","isIndex","hasOptionLabel","optionLabel","getElementIndex","dataItemByIndex","_getNormalizedSelectCandidate","normalizedCandidate","_move","pressed","moveIndex","selectCandidate","key","keyCode","down","DOWN","isVirtual","UP","altKey","firstChild","_fetch","hasClass","total","_get","item","ENTER","TAB","selection","activeFilter","shouldTrigger","input","_focusElement","focusout","ESC","PAGEDOWN","PAGEUP","scrollWith","screenHeight","_fetchData","hasItems","cascadeFrom","_options","option","dataText","dataValue","htmlElement","indexOf","replace","setAttribute","_reset","formId","form","parentElement","_cascade","_cascadeHandlerProxy","_cascadeHandler","_cascadeFilterRequests","_selectedValue","_toggleCascadeOnFocus","valueBeforeCascade","_clearSelection","_cascadeChange","filterValue","cascadeFromParentField","cascadeFromField","handler","currentHandler","shift","STATIC_LIST_NS","MOUSELEAVE","_touchHandlers","thead","find","_optionID","_selectedIndices","_view","_dataItems","_values","slice","_getter","_templates","_createOnScrollProxy","events","source","_refreshHandler","_fixedHeader","startY","endY","itemSelector","tapPosition","event","originalEvent","changedTouches","pageY","Math","abs","_touchTriggered","_triggerClick","get","skip","_render","_scrollId","clientHeight","scroll","scrollTop","itemOffsetTop","offsetTop","itemOffsetHeight","contentScrollTop","contentOffsetHeight","bottomDistance","dataItems","_getValues","_valueGetter","map","next","hasCandidate","focusIndex","skipUpdate","_skipUpdate","indices","result","singleSelection","selectedIndices","uiSelectedIndices","added","deferred","resolve","filtered","_deselectFiltered","_deselect","_valueComparer","removeAt","position","setValue","_valueDeferred","state","_valueIndices","_onScroll","_renderHeader","_valueExpr","values","body","comparer","normalized","_valueType","Function","_dataItemPosition","valueExpr","j","_template","useWithBlock","templates","templateText","_normalizeIndices","newIndices","_firstVisibleItem","itemHeight","itemIndex","floor","lastChild","forward","nextSibling","previousSibling","isGrouped","visibleItem","_renderItem","context","notFirstItem","hasColumns","altRow","newGroup","isLastGroupedItem","_renderColumns","dataContext","_selected","innerHTML","_lastDSFilter","Query","compareFilters","skipUpdateOnBind","isItemChange","_angularItems","itemsToMatch","found","itemsLength","selectedLength","changed","unchanged","mapChangedItems","_bound","isEmptyObject","grep","plugin","registerPrefix","jQuery"],"sources":["kendo.list.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.popup.js';\nimport './kendo.label.js';\n\nvar __meta__ = {\n    id: \"list\",\n    name: \"List\",\n    category: \"framework\",\n    depends: [ \"data\", \"popup\", \"label\" ],\n    hidden: true\n};\n\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        outerHeight = kendo._outerHeight,\n        percentageUnitsRegex = /^\\d+(\\.\\d+)?%$/i,\n        Widget = ui.Widget,\n        keys = kendo.keys,\n        support = kendo.support,\n        htmlEncode = kendo.htmlEncode,\n        activeElement = kendo._activeElement,\n        outerWidth = kendo._outerWidth,\n        ObservableArray = kendo.data.ObservableArray,\n        ID = \"id\",\n        CHANGE = \"change\",\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        KSELECTED = \"k-selected\",\n        LOADING = \"k-i-loading k-input-loading-icon\",\n        LIST = \"k-list\",\n        TABLE = \"k-table\",\n        DATA_TABLE = \"k-data-table\",\n        TABLE_MD = \"k-table-md\",\n        LIST_UL = \"k-list-ul\",\n        TABLE_LIST = \"k-table-list\",\n        FIXED_GROUP_HEADER = \".k-list-group-sticky-header\",\n        GROUP_LABEL = \".k-list-item-group-label\",\n        ITEMSELECTOR = \".k-list-item\",\n        ITEMSELECTORTABLE = \".k-table-row\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CASCADE = \"cascade\",\n        SELECT = \"select\",\n        CLICK = \"click\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEENTER = \"mouseenter\",\n        ACTIVATE = \"activate\",\n        DEACTIVATE = \"deactivate\",\n        DATA_BINDING = \"dataBinding\",\n        DATA_BOUND = \"dataBound\",\n        SELECTED_ITEM_CHANGE = \"selectedItemChange\",\n        SELECTED = \"selected\",\n        REQUESTSTART = \"requestStart\",\n        REQUESTEND = \"requestEnd\",\n        BLUR = \"blur\",\n        FOCUS = \"focus\",\n        FOCUSOUT = \"focusout\",\n        extend = $.extend,\n        isArray = Array.isArray,\n        browser = support.browser,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        TEXT = \"text\",\n        VALUE = \"value\",\n        isIE = browser.msie,\n        quotRegExp = /\"/g,\n        alternativeNames = {\n            \"ComboBox\": [ \"DropDownList\", \"MultiColumnComboBox\" ],\n            \"DropDownList\": [ \"ComboBox\", \"MultiColumnComboBox\" ],\n            \"MultiColumnComboBox\": [ \"ComboBox\", \"DropDownList\" ]\n        },\n\n        UL_EL = '<ul unselectable=\"on\"/>',\n        LIST_EL = \"<div class='k-list'/>\",\n        NO_DATA_EL = '<div class=\"k-no-data\" style=\"display: none;\"></div>',\n        LIST_FOOTER_EL = '<div class=\"k-list-footer\"></div>',\n        TABLE_FOOTER_EL = '<div class=\"k-table-footer\">' +\n                '<span class=\"k-table-td\"></span>' +\n            '</div>',\n        MOUSEDOWN = \"mousedown\",\n        LIST_SUFFIX = \"-list\",\n        LISTBOX_SUFFIX = \"_listbox\",\n        ARIA_LABELLEDBY = \"aria-labelledby\",\n        ARIA_LABEL = \"aria-label\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ARIA_AUTOCOMPLETE = \"aria-autocomplete\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_LIVE = \"aria-live\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_BUSY = \"aria-busy\",\n        ARIA_MULTISELECTABLE = \"aria-multiselectable\",\n        ARIA_SELECTED = \"aria-selected\",\n        GROUP_ROW_SEL = \".k-table-group-row\";\n\n    var List = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this,\n                id;\n\n            Widget.fn.init.call(that, element, options);\n            element = that.element;\n            options = that.options;\n\n            that._isSelect = element.is(SELECT);\n\n            if (that._isSelect && that.element[0].length) {\n                if (!options.dataSource) {\n                    options.dataTextField = options.dataTextField || TEXT;\n                    options.dataValueField = options.dataValueField || VALUE;\n                }\n            }\n\n            that._listSize = kendo.cssProperties.getValidClass({\n                widget: \"List\",\n                propName: \"size\",\n                value: options.size\n            });\n\n            that.ul = $(UL_EL).attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            that.list = $(LIST_EL)\n                .addClass(that._listSize)\n                .append(that.ul);\n\n            id = element.attr(ID);\n\n            if (!id) {\n                id = kendo.guid();\n            }\n\n            that.list.attr(ID, id + LIST_SUFFIX);\n            that.ul.attr(ID, id + LISTBOX_SUFFIX);\n\n            if (options.columns && options.columns.length) {\n                that.list.removeClass(LIST).addClass(DATA_TABLE);\n                that.list.removeClass(that._listSize).addClass(TABLE_MD);\n\n                that.ul.removeClass(LIST_UL).addClass(TABLE);\n\n                that._columnsHeader();\n            }\n\n            that._header();\n            that._noData();\n            that._footer();\n            that._accessors();\n            that._initValue();\n        },\n\n        options: {\n            valuePrimitive: false,\n            footerTemplate: \"\",\n            headerTemplate: \"\",\n            noDataTemplate: true,\n            size: \"medium\",\n            messages: {\n                \"noData\": \"No data found.\",\n                \"clear\": \"clear\"\n            }\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            if (options && options.enable !== undefined$1) {\n                options.enabled = options.enable;\n            }\n\n            if (options.columns && options.columns.length) {\n                this._columnsHeader();\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n\n            if (options.label && this._inputLabel) {\n                this.label.setOptions(options.label);\n            } else if (options.label === false) {\n                this.label._unwrapFloating();\n                this._inputLabel.remove();\n                delete this._inputLabel;\n            } else if (options.label) {\n                this._label();\n            }\n        },\n\n        focus: function() {\n            this._focused.trigger(FOCUS);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined$1 ? true : readonly,\n                disable: false\n            });\n\n            if (this.label && this.label.floatingLabel) {\n                this.label.floatingLabel.readonly(readonly === undefined$1 ? true : readonly);\n            }\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined$1 ? true : enable)\n            });\n\n            if (this.label && this.label.floatingLabel) {\n                this.label.floatingLabel.enable(enable = enable === undefined$1 ? true : enable);\n            }\n        },\n\n        _label: function() {\n            var that = this;\n            var options = that.options;\n            var labelOptions = $.isPlainObject(options.label) ? options.label : {\n                content: options.label\n            };\n\n            that.label = new kendo.ui.Label(null, $.extend({}, labelOptions, {\n                widget: that,\n                floatCheck: that._floatCheck.bind(that)\n            }));\n\n            that._inputLabel = that.label.element;\n        },\n\n        _floatCheck: function() {\n            if (this.listView) {\n                var hasValue = this.value() || (this.text ? this.text() : false);\n                return !hasValue && !this.popup.visible();\n            }\n\n            return true;\n        },\n\n        _refreshFloatingLabel: function() {\n            var that = this;\n\n            if (that.label && that.label.floatingLabel) {\n                that.label.floatingLabel.refresh();\n            }\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            this._angularElement(header, \"cleanup\");\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n\n            if (list.list.parent.length > 0) {\n                list.list.before(header);\n            }\n\n            this._angularElement(list.header, \"compile\");\n        },\n\n        _columnsHeader: function() {\n            var list = this;\n            var columnsHeader = $(list.columnsHeader);\n\n            this._angularElement(columnsHeader, \"cleanup\");\n            kendo.destroy(columnsHeader);\n            columnsHeader.remove();\n\n            var header = \"<div class='k-table-header'><div class='k-table-header-wrap'><table class='k-table' role='presentation'>\";\n            var colGroup = \"<colgroup>\";\n            var row = \"<tr class='k-table-row'>\";\n\n            for (var idx = 0; idx < this.options.columns.length; idx++) {\n                var currentColumn = this.options.columns[idx];\n                var title = currentColumn.title || currentColumn.field || \"\";\n                var template = currentColumn.headerTemplate || title;\n                var columnsHeaderTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n                var currentWidth = currentColumn.width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n\n                if (currentWidth && !isNaN(currentWidthInt)) {\n                    widthStyle += \"style='width:\";\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                    widthStyle += \";'\";\n                }\n\n                colGroup += \"<col \" + widthStyle + \"/>\";\n\n                row += \"<th class='k-table-th'>\";\n                row += columnsHeaderTemplate(currentColumn);\n                row += \"</th>\";\n            }\n            colGroup += \"</colgroup>\";\n            row += \"</tr>\";\n            header += colGroup;\n            header += \"<thead class='k-table-thead'>\";\n            header += row;\n            header += \"</thead></table></div></div>\";\n\n            list.columnsHeader = columnsHeader = $(header);\n            list.list.prepend(columnsHeader);\n\n            this._angularElement(list.columnsHeader, \"compile\");\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ? list.options.messages.noData : list.options.noDataTemplate;\n\n            list.angular(\"cleanup\", function() { return { elements: noData }; });\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $(NO_DATA_EL).appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n            var footerEl = this.options.columns && this.options.columns.length ? TABLE_FOOTER_EL : LIST_FOOTER_EL;\n\n            this._angularElement(footer, \"cleanup\");\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $(footerEl).appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _listOptions: function(options) {\n            var that = this;\n            var currentOptions = that.options;\n            var virtual = currentOptions.virtual;\n            var changeEventOption = { change: that._listChange.bind(that) };\n            var listBoundHandler = that._listBound.bind(that);\n            var focusedElm = that._focused;\n            var inputId = that.element.attr(\"id\");\n            var labelElm = $(\"label[for=\\\"\" + that.element.attr(\"id\") + \"\\\"]\");\n            var labelledBy = focusedElm.attr(ARIA_LABELLEDBY);\n\n            if (!labelledBy && labelElm.length) {\n                labelledBy = labelElm.attr(\"id\") || that._generateLabelId(labelElm, inputId || kendo.guid());\n            }\n\n            virtual = typeof virtual === \"object\" ? virtual : {};\n\n            options = $.extend({\n                autoBind: false,\n                selectable: true,\n                dataSource: that.dataSource,\n                click: that._click.bind(that),\n                activate: that._activateItem.bind(that),\n                columns: currentOptions.columns,\n                deactivate: that._deactivateItem.bind(that),\n                dataBinding: function() {\n                    that.trigger(DATA_BINDING);\n                },\n                dataBound: listBoundHandler,\n                height: currentOptions.height,\n                dataValueField: currentOptions.dataValueField,\n                dataTextField: currentOptions.dataTextField,\n                groupTemplate: currentOptions.groupTemplate,\n                fixedGroupTemplate: currentOptions.fixedGroupTemplate,\n                template: currentOptions.template,\n                ariaLabel: focusedElm.attr(ARIA_LABEL),\n                ariaLabelledBy: labelledBy,\n                listSize: that._listSize\n            }, options, virtual, changeEventOption);\n\n            if (!options.template) {\n                options.template = \"#:\" + kendo.expr(options.dataTextField, \"data\") + \"#\";\n            }\n\n            if (currentOptions.$angular) {\n                options.$angular = currentOptions.$angular;\n            }\n\n            return options;\n        },\n\n        _initList: function() {\n            var that = this;\n            var listOptions = that._listOptions({\n                selectedItemChange: that._listChange.bind(that)\n            });\n\n            if (!that.options.virtual) {\n                that.listView = new kendo.ui.StaticList(that.ul, listOptions);\n            } else {\n                that.listView = new kendo.ui.VirtualList(that.ul, listOptions);\n                that.list.addClass(\"k-virtual-list\");\n            }\n\n            that.listView.bind(\"listBound\", that._listBound.bind(that));\n            that._setListValue();\n        },\n\n        _setListValue: function(value) {\n            value = value || this.options.value;\n\n            if (value !== undefined$1) {\n                this.listView.value(value)\n                    .done(this._updateSelectionState.bind(this));\n            }\n        },\n\n        _updateSelectionState: $.noop,\n\n        _listMousedown: function(e) {\n            if (!this.filterInput || this.filterInput[0] !== e.target) {\n                e.preventDefault();\n            }\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _hideClear: function() {\n            var list = this;\n\n            if (list._clear) {\n                list._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _showClear: function() {\n            if (this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _clearValue: function() {\n            this._clearText();\n            this._accessor(\"\");\n            this.listView.value([]);\n\n            if (this._isSelect) {\n                this._customOption = undefined$1;\n            }\n\n            if (this._isFilterEnabled() && !this.options.enforceMinLength) {\n                this._filter({ word: \"\", open: false });\n\n                if (this.options.highlightFirst) {\n                    this.listView.focus(0);\n                }\n            }\n            this._change();\n        },\n\n        _clearText: function() {\n            this.text(\"\");\n        },\n\n        _clearFilter: function() {\n            if (!this.options.virtual) {\n                this.listView.bound(false);\n            }\n\n            this._filterSource();\n        },\n\n        _filterSource: function(filter, force) {\n            var that = this;\n            var options = that.options;\n            var isMultiColumnFiltering = options.filterFields && filter && filter.logic && filter.filters && filter.filters.length;\n            var dataSource = that.dataSource;\n            var expression = extend({}, dataSource.filter() || {});\n            var resetPageSettings = filter || (expression.filters && expression.filters.length && !filter);\n\n            var removed = removeFiltersForField(expression, options.dataTextField);\n\n            this._clearFilterExpressions(expression);\n\n            if ((filter || removed) && that.trigger(\"filtering\", { filter: filter })) {\n                return $.Deferred().reject().promise();\n            }\n\n            var newExpression = {\n                filters: [],\n                logic: \"and\"\n            };\n\n            if (isMultiColumnFiltering) {\n                newExpression.filters.push(filter);\n            } else {\n                this._pushFilterExpression(newExpression, filter);\n            }\n\n            if (isValidFilterExpr(expression)) {\n                if (newExpression.logic === expression.logic) {\n                    newExpression.filters = newExpression.filters.concat(expression.filters);\n                } else {\n                    newExpression.filters.push(expression);\n                }\n            }\n\n            if (that._cascading) {\n                this.listView.setDSFilter(newExpression);\n            }\n\n            var dataSourceState = extend({}, {\n                page: resetPageSettings ? 1 : dataSource.page(),\n                pageSize: resetPageSettings ? dataSource.options.pageSize : dataSource.pageSize(),\n                sort: dataSource.sort(),\n                filter: dataSource.filter(),\n                group: dataSource.group(),\n                aggregate: dataSource.aggregate()\n            }, { filter: newExpression });\n\n            return dataSource[force ? \"read\" : \"query\"](dataSource._mergeState(dataSourceState));\n        },\n\n        _pushFilterExpression: function(newExpression, filter) {\n            if (isValidFilterExpr(filter) && filter.value !== \"\") {\n                newExpression.filters.push(filter);\n            }\n        },\n\n        _clearFilterExpressions: function(expression) {\n            if (!expression.filters) {\n                return;\n            }\n\n            var filtersToRemove;\n\n            for (var i = 0; i < expression.filters.length; i++) {\n                if (\"fromFilter\" in expression.filters[i]) {\n                    filtersToRemove = i;\n                }\n            }\n\n            if (!isNaN(filtersToRemove)) {\n                expression.filters.splice(filtersToRemove, 1);\n            }\n        },\n\n        _angularElement: function(element, action) {\n            if (!element) {\n                return;\n            }\n\n            this.angular(action, function() {\n                return { elements: element };\n            });\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            this._angularElement(noData, \"cleanup\");\n            noData.html(list.noDataTemplate({ instance: list }));\n            this._angularElement(noData, \"compile\");\n        },\n\n        _toggleNoData: function(show) {\n            $(this.noData).toggle(show);\n        },\n\n        _toggleHeader: function(show) {\n            var groupHeader = this.listView.content.prev(FIXED_GROUP_HEADER);\n            groupHeader.toggle(show);\n        },\n\n        _renderFooter: function() {\n            var list = this,\n                footer = list.footer ? this.options.columns && this.options.columns.length ? list.footer.children().first() : list.footer : null;\n\n            if (!footer) {\n                return;\n            }\n\n            this._angularElement(footer, \"cleanup\");\n            footer.html(list.footerTemplate({ instance: list }));\n            this._angularElement(footer, \"compile\");\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.dataSource.flatView().length;\n        },\n\n        _initValue: function() {\n            var that = this,\n                value = that.options.value;\n\n            if (value !== null) {\n                that.element.val(value);\n            } else {\n                value = that._accessor();\n                that.options.value = value;\n            }\n\n            that._old = value;\n        },\n\n        _ignoreCase: function() {\n            var that = this,\n                model = that.dataSource.reader.model,\n                field;\n\n            if (model && model.fields) {\n                field = model.fields[that.options.dataTextField];\n\n                if (field && field.type && field.type !== \"string\") {\n                    that.options.ignoreCase = false;\n                }\n            }\n        },\n\n        _focus: function(candidate) {\n            return this.listView.focus(candidate);\n        },\n\n        _filter: function(options) {\n            var that = this;\n            var widgetOptions = that.options;\n            var word = options.word;\n            var filterFields = widgetOptions.filterFields;\n            var field = widgetOptions.dataTextField;\n            var expression;\n\n            if (filterFields && filterFields.length) {\n                expression = {\n                    logic: \"or\",\n                    filters: [],\n                    fromFilter: true\n                };\n                for (var i = 0; i < filterFields.length; i++) {\n                    this._pushFilterExpression(expression, that._buildExpression(word, filterFields[i]));\n                }\n            } else {\n                expression = that._buildExpression(word, field);\n            }\n\n            that._open = options.open;\n            that._filterSource(expression);\n        },\n\n        _buildExpression: function(value, field) {\n            var that = this;\n            var widgetOptions = that.options;\n            var ignoreCase = widgetOptions.ignoreCase;\n            var accentFoldingFiltering = that.dataSource.options.accentFoldingFiltering;\n\n            return {\n                value: ignoreCase ? (accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase()) : value,\n                field: field,\n                operator: widgetOptions.filter,\n                ignoreCase: ignoreCase\n            };\n        },\n\n        _clearButton: function() {\n            var list = this;\n            var clearTitle = list.options.messages.clear;\n\n            if (!list._clear) {\n                list._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\"><span class=\"k-icon k-i-x\"></span></span>').attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (!list.options.clearButton) {\n                list._clear.remove();\n            }\n            this._hideClear();\n        },\n\n        search: function(word) {\n            var options = this.options;\n\n            word = typeof word === \"string\" ? word : this._inputValue();\n\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                this._state = \"filter\";\n                if (this.listView) {\n                    this.listView._emptySearch = !kendo.trim(word).length;\n                }\n\n                if (!this._isFilterEnabled()) {\n                    this._searchByWord(word);\n                } else {\n                    this._filter({ word: word, open: true });\n                }\n            }\n        },\n\n        current: function(candidate) {\n            return this._focus(candidate);\n        },\n\n        items: function() {\n            return this.ul[0].children;\n        },\n\n        destroy: function() {\n            var that = this;\n            var ns = that.ns;\n\n            Widget.fn.destroy.call(that);\n\n            that._unbindDataSource();\n\n            that.listView.destroy();\n            that.list.off(ns);\n\n            that.popup.destroy();\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n\n            if (that.label) {\n                that.label.destroy();\n            }\n        },\n\n        dataItem: function(index) {\n            var that = this;\n\n            if (index === undefined$1) {\n                return that.listView.selectedDataItems()[0];\n            }\n\n            if (typeof index !== \"number\") {\n                if (that.options.virtual) {\n                    return that.dataSource.getByUid($(index).data(\"uid\"));\n                }\n\n                index = $(that.items()).index(index);\n            }\n\n            return that.dataSource.flatView()[index];\n        },\n\n        _activateItem: function() {\n            var current = this.listView.focus();\n            if (current && this.popup.visible()) {\n                this._focused.add(this.filterInput).attr(ARIA_ACTIVEDESCENDANT, current.attr(\"id\"));\n            }\n        },\n\n        _deactivateItem: function() {\n            this._focused.add(this.filterInput).removeAttr(ARIA_ACTIVEDESCENDANT);\n        },\n\n        _accessors: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            that._text = getter(options.dataTextField);\n            that._value = getter(options.dataValueField);\n        },\n\n        _aria: function(id) {\n            var that = this,\n                options = that.options,\n                element = that._focused,\n                autocomplete;\n\n            if (options.suggest !== undefined$1) {\n                if (options.filter === \"none\") {\n                    if (options.suggest === true) {\n                        autocomplete = \"inline\";\n                    } else {\n                        autocomplete = \"none\";\n                    }\n                } else {\n                    if (options.suggest === true) {\n                        autocomplete = \"both\";\n                    } else {\n                        autocomplete = \"list\";\n                    }\n                }\n\n                element.attr(ARIA_AUTOCOMPLETE, autocomplete);\n            }\n\n            id = id ? id + \" \" + that.ul[0].id : that.ul[0].id;\n\n            element.attr({\n                \"aria-controls\": id\n            });\n\n            if (that.filterInput && that.filterInput.length > 0) {\n                that.filterInput.attr(ARIA_CONTROLS, id);\n            }\n\n            that.ul.attr(ARIA_LIVE, !that._isFilterEnabled() ? \"off\" : \"polite\");\n\n            that._ariaLabel(that._focused);\n        },\n\n        _blur: function() {\n            var that = this;\n\n            that._change();\n            that.close();\n            that._userTriggered = false;\n        },\n\n        _isValueChanged: function(value) {\n            return value !== unifyType(this._old, typeof value);\n        },\n\n        _change: function() {\n            var that = this;\n            var index = that.selectedIndex;\n            var optionValue = that.options.value;\n            var value = that.value();\n            var trigger;\n\n            if (that._isSelect && !that.listView.bound() && optionValue) {\n                value = optionValue;\n            }\n\n            if (that._isValueChanged(value)) {\n                trigger = true;\n            } else if (that._valueBeforeCascade !== undefined$1 && that._valueBeforeCascade !== unifyType(that._old, typeof that._valueBeforeCascade) && that._userTriggered) {\n                trigger = true;\n            } else if (index !== undefined$1 && index !== that._oldIndex && !that.listView.isFiltered()) {\n                trigger = true;\n            }\n\n            if (trigger) {\n\n                if (that._old === null || that._old === \"\" || value === \"\") {\n                    that._valueBeforeCascade = that._old = value;\n                } else {\n                    if (that.dataItem()) {\n                        that._valueBeforeCascade = that._old = that.options.dataValueField ? that.dataItem()[that.options.dataValueField] : that.dataItem();\n                    } else {\n                        that._valueBeforeCascade = that._old = null;\n                    }\n                }\n                that._oldIndex = index;\n\n                if (!that._typing) {\n                    // trigger the DOM change event so any subscriber gets notified\n                    that.element.trigger(CHANGE);\n                }\n\n                that.trigger(CHANGE);\n            }\n\n            that.typing = false;\n        },\n\n        _data: function() {\n            return this.dataSource.view();\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined$1) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _dataValue: function(dataItem) {\n            var value = this._value(dataItem);\n\n            if (value === undefined$1) {\n                value = this._text(dataItem);\n            }\n\n            return value;\n        },\n\n        _offsetHeight: function() {\n            var offsetHeight = 0;\n            var siblings = this.listView.content.parent().prevAll(\":visible\");\n\n            siblings.each(function() {\n                var element = $(this);\n\n                offsetHeight += outerHeight(element, true);\n            });\n\n            return offsetHeight;\n        },\n\n        _height: function(length) {\n            var that = this;\n            var list = that.list;\n            var height = that.options.height;\n            var visible = that.popup.visible();\n            var isMccb = this.options.columns && this.options.columns.length;\n            var offsetTop, popups;\n\n            if (length || that.options.noDataTemplate) {\n                // Check where animation container stays\n                popups = list.parent().add(list.closest(\".k-animation-container\")).show();\n\n                if (!list.parent().is(\":visible\")) {\n                    popups.hide();\n                    return;\n                }\n\n                height = that.listView.content[0].scrollHeight > height ? height : \"auto\";\n\n                popups.height(height);\n\n                if (height !== \"auto\") {\n                    offsetTop = that._offsetHeight();\n\n                    height = height - offsetTop;\n\n                    if (isMccb) {\n                        height = height - (outerHeight($(that.footer)) || 0) - (outerHeight($(that.columnsHeader)) || 0);\n                    }\n                }\n\n                if (isMccb) {\n                    that.listView.content.outerHeight(height);\n                } else {\n                    that.listView.content.parent().outerHeight(height);\n                }\n\n                if (!visible) {\n                    list.parent().hide();\n                }\n            }\n\n            return height;\n        },\n\n        _openHandler: function(e) {\n            var current;\n\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                this._focused.attr(ARIA_EXPANDED, true);\n                this.ul.attr(ARIA_HIDDEN, false);\n\n                current = this.listView.focus();\n                if (current) {\n                    this._focused.add(this.filterInput).attr(ARIA_ACTIVEDESCENDANT, current.attr(\"id\"));\n                }\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list.parent(),\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                this._focused.attr(ARIA_EXPANDED, false);\n                this.ul.attr(ARIA_HIDDEN, true);\n                this._focused.add(this.filterInput).removeAttr(ARIA_ACTIVEDESCENDANT);\n            }\n        },\n\n        _focusItem: function() {\n            var listView = this.listView;\n            var noFocusedItem = !listView.focus();\n            var index = last(listView.select());\n\n            if (index === undefined$1 && this.options.highlightFirst && noFocusedItem) {\n                index = 0;\n            }\n\n            if (index !== undefined$1) {\n                listView.focus(index);\n            } else if (noFocusedItem) {\n                listView.scrollToIndex(0);\n            }\n        },\n\n        _calculateGroupPadding: function(height) {\n            var li = this.ul.children(\".k-first\").first();\n            var groupHeader = this.listView.content.prev(FIXED_GROUP_HEADER);\n            var padding = 0;\n            var direction = 'right';\n\n            if (groupHeader[0] && groupHeader[0].style.display !== \"none\") {\n                if (height !== \"auto\") {\n                    padding = kendo.support.scrollbar();\n                }\n\n                if (this.element.parents('.k-rtl').length) {\n                    direction = 'left';\n                }\n\n                padding += parseFloat(li.css(\"border-\" + direction + \"-width\"), 10) + parseFloat(li.children(GROUP_LABEL).css(\"padding-\" + direction), 10);\n                groupHeader.css(\"padding-\" + direction, padding);\n            }\n        },\n\n        _calculatePopupHeight: function(force) {\n            var height = this._height(this.dataSource.flatView().length || force);\n            this._calculateGroupPadding(height);\n            this._calculateColumnsHeaderPadding(height);\n        },\n\n        _calculateColumnsHeaderPadding: function(height) {\n            if (this.options.columns && this.options.columns.length) {\n                var list = this;\n                var isRtl = support.isRtl(list.wrapper);\n                var scrollbar = kendo.support.scrollbar();\n\n                list.columnsHeader.css((isRtl ? \"padding-left\" : \"padding-right\"), height !== \"auto\" ? scrollbar : 0);\n            }\n        },\n\n        _refreshScroll: function() {\n            var listView = this.listView;\n            var enableYScroll = listView.element.height() > listView.content.height();\n\n            if (this.options.autoWidth) {\n                listView.content.css({\n                    overflowX: \"hidden\",\n                    overflowY: enableYScroll ? \"scroll\" : \"auto\"\n                });\n            }\n        },\n\n        _resizePopup: function(force) {\n            if (this.options.virtual) {\n                return;\n            }\n\n            if (!this.popup.element.is(\":visible\")) {\n                this.popup.one(\"open\", (function(force) {\n                    return (function() {\n                        this._calculatePopupHeight(force);\n                    }).bind(this);\n                }).call(this, force));\n\n                this.popup.one(ACTIVATE, this._refreshScroll.bind(this));\n            } else {\n                this._calculatePopupHeight(force);\n            }\n        },\n\n        _popup: function() {\n            var list = this;\n\n            list.list.wrap(\"<div>\");\n\n            list.popup = new ui.Popup(list.list.parent(), extend({}, list.options.popup, {\n                anchor: list.wrapper,\n                open: list._openHandler.bind(list),\n                close: list._closeHandler.bind(list),\n                animation: list.options.animation,\n                isRtl: support.isRtl(list.wrapper),\n                autosize: list.options.autoWidth,\n                activate: () => {\n                    this._refreshFloatingLabel();\n                },\n                deactivate: () => {\n                    this._refreshFloatingLabel();\n                }\n            }));\n\n            list.popup.element.prepend(list.header)\n                .on(MOUSEDOWN + this.ns, this._listMousedown.bind(this));\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === MOUSEENTER);\n        },\n\n        _toggle: function(open, preventFocus) {\n            var that = this;\n            var touchEnabled = support.mobileOS && (support.touch || support.MSPointers || support.pointers);\n\n            open = open !== undefined$1 ? open : !that.popup.visible();\n\n            if (!preventFocus && !touchEnabled && that._focused[0] !== activeElement()) {\n                that._prevent = true;\n                that._focused.trigger(FOCUS);\n                that._prevent = false;\n            }\n\n            that[open ? OPEN : CLOSE]();\n        },\n\n        _triggerCascade: function() {\n            var that = this;\n\n            if (!that._cascadeTriggered || that.value() !== unifyType(that._cascadedValue, typeof that.value())) {\n                that._cascadedValue = that.value();\n                that._cascadeTriggered = true;\n                that.trigger(CASCADE, { userTriggered: that._userTriggered });\n            }\n        },\n\n        _triggerChange: function() {\n            if (this._valueBeforeCascade !== this.value()) {\n                this.trigger(CHANGE);\n            }\n        },\n\n        _unbindDataSource: function() {\n            var that = this;\n\n            that.dataSource.unbind(REQUESTSTART, that._requestStartHandler)\n                           .unbind(REQUESTEND, that._requestEndHandler)\n                           .unbind(\"error\", that._errorHandler);\n        },\n\n        requireValueMapper: function(options, value) {\n            var hasValue = (options.value instanceof Array ? options.value.length : options.value) || (value instanceof Array ? value.length : value);\n            if (hasValue && options.virtual && typeof options.virtual.valueMapper !== \"function\") {\n                throw new Error(\"ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function\");\n            }\n        }\n    });\n\n    function unifyType(value, type) {\n        if (value !== undefined$1 && value !== \"\" && value !== null) {\n            if (type === \"boolean\") {\n                if (typeof value !== \"boolean\") {\n                    value = value.toString().toLowerCase() === \"true\";\n                }\n                value = Boolean(value);\n            } else if (type === \"number\") {\n                value = Number(value);\n            } else if (type === \"string\") {\n                value = value.toString();\n            }\n        }\n\n        return value;\n    }\n\n    extend(List, {\n        inArray: function(node, parentNode) {\n            var idx, length, siblings = parentNode.children;\n\n            if (!node || node.parentNode !== parentNode) {\n                return -1;\n            }\n\n            for (idx = 0, length = siblings.length; idx < length; idx++) {\n                if (node === siblings[idx]) {\n                    return idx;\n                }\n            }\n\n            return -1;\n        },\n        unifyType: unifyType\n    });\n\n    kendo.ui.List = List;\n\n    ui.Select = List.extend({\n        init: function(element, options) {\n            List.fn.init.call(this, element, options);\n            this._initial = this.element.val();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var parent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            if (that.listView.bound()) {\n                that._initialIndex = null;\n                that.listView._current = null;\n            }\n\n            that.listView.setDataSource(that.dataSource);\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            parent = that._parentWidget();\n\n            if (parent) {\n                that._cascadeSelect(parent);\n            }\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        select: function(candidate) {\n            var that = this;\n\n            if (candidate === undefined$1) {\n                return that.selectedIndex;\n            } else {\n                return that._select(candidate).done(function() {\n                    that._cascadeValue = that._old = that._accessor();\n                    that._oldIndex = that.selectedIndex;\n\n                    that._refreshFloatingLabel();\n                });\n            }\n        },\n\n        _accessor: function(value, idx) {\n            return this[this._isSelect ? \"_accessorSelect\" : \"_accessorInput\"](value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined$1) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _accessorSelect: function(value, idx) {\n            var element = this.element[0];\n            var hasValue;\n\n            if (value === undefined$1) {\n                return getSelectedOption(element).value || \"\";\n            }\n\n            getSelectedOption(element).selected = false;\n\n            if (idx === undefined$1) {\n                idx = -1;\n            }\n\n            hasValue = (value !== null && value !== \"\");\n\n            if (hasValue && idx == -1) {\n                this._custom(value);\n            } else {\n                if (value) {\n                    element.value = value;\n                } else {\n                    element.selectedIndex = idx;\n                }\n            }\n        },\n\n        _syncValueAndText: function() {\n            return true;\n        },\n\n        _custom: function(value) {\n            var that = this;\n            var element = that.element;\n            var custom = that._customOption;\n\n            if (!custom) {\n                custom = $(\"<option/>\");\n                that._customOption = custom;\n\n                element.append(custom);\n            }\n\n            custom.text(value);\n            custom[0].selected = true;\n        },\n\n        _hideBusy: function() {\n            var that = this;\n            clearTimeout(that._busy);\n            that._arrowIcon.removeClass(LOADING);\n            that._focused.attr(ARIA_BUSY, false);\n            that._busy = null;\n            that._showClear();\n        },\n\n        _showBusy: function(e) {\n            var that = this;\n\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            that._request = true;\n\n            if (that._busy) {\n                return;\n            }\n\n            that._busy = setTimeout(function() {\n                if (that._arrowIcon) { //destroyed after request start\n                    that._focused.attr(ARIA_BUSY, true);\n                    that._arrowIcon.addClass(LOADING);\n                    that._hideClear();\n                }\n            }, 100);\n        },\n\n        _requestEnd: function() {\n            this._request = false;\n            this._hideBusy();\n        },\n\n        _dataSource: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                dataSource = options.dataSource || {},\n                idx;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that._isSelect) {\n                idx = element[0].selectedIndex;\n                if (idx > -1) {\n                    options.index = idx;\n                }\n\n                dataSource.select = element;\n                dataSource.fields = [{ field: options.dataTextField },\n                                     { field: options.dataValueField }];\n            }\n\n            if (that.dataSource) {\n                that._unbindDataSource();\n            } else {\n                that._requestStartHandler = that._showBusy.bind(that);\n                that._requestEndHandler = that._requestEnd.bind(that);\n                that._errorHandler = that._hideBusy.bind(that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(dataSource)\n                                   .bind(REQUESTSTART, that._requestStartHandler)\n                                   .bind(REQUESTEND, that._requestEndHandler)\n                                   .bind(\"error\", that._errorHandler);\n        },\n\n        _firstItem: function() {\n            this.listView.focusFirst();\n        },\n\n        _lastItem: function() {\n            this.listView.focusLast();\n        },\n\n        _nextItem: function() {\n            return this.listView.focusNext();\n        },\n\n        _prevItem: function() {\n            return this.listView.focusPrev();\n        },\n\n        _getNormalizedDataItem: function(candidate) {\n            var that = this,\n                listView = that.listView,\n                isIndex = typeof candidate === \"number\",\n                hasOptionLabel = that.optionLabel && that.optionLabel.length,\n                index;\n\n            if (isIndex) {\n                index = hasOptionLabel ? --candidate : candidate;\n            } else {\n                index = listView.getElementIndex(candidate);\n            }\n\n            return listView.dataItemByIndex(index);\n        },\n\n        _getNormalizedSelectCandidate: function(candidate) {\n            var that = this,\n                hasOptionLabel = that.optionLabel && that.optionLabel.length,\n                isIndex = typeof candidate === \"number\",\n                normalizedCandidate = candidate;\n\n            if (hasOptionLabel && isIndex) {\n                normalizedCandidate++;\n            }\n\n            return normalizedCandidate;\n        },\n\n        _move: function(e) {\n            var that = this;\n            var listView = that.listView;\n            var key = e.keyCode;\n            var down = key === keys.DOWN;\n            var isVirtual = that.options.virtual;\n            var dataItem;\n            var pressed;\n            var current;\n            var moveIndex;\n            var selectCandidate;\n\n            if (key === keys.UP || down) {\n                if (e.altKey) {\n                    that.toggle(down);\n                } else {\n                    if (!listView.bound() && !that.ul[0].firstChild) {\n                        if (!that._fetch) {\n                            that.dataSource.one(CHANGE, function() {\n                                that._fetch = false;\n                                that._move(e);\n                            });\n\n                            that._fetch = true;\n                            that._filterSource();\n                        }\n\n                        e.preventDefault();\n\n                        return true; //pressed\n                    }\n\n                    current = that._focus();\n\n                    if (!that._fetch && (!current || current.hasClass(KSELECTED))) {\n                        if (down) {\n                            moveIndex = that._nextItem();\n\n                            if ((isVirtual && moveIndex <= 0) || (!that._focus() && !moveIndex) ) {\n                                that._lastItem();\n                            }\n                        } else {\n                            moveIndex = that._prevItem();\n\n                            if ((isVirtual && moveIndex >= listView.dataSource.total() - 1) || (!that._focus() && !moveIndex)) {\n                                that._firstItem();\n                            }\n                        }\n                    }\n\n                    selectCandidate = that._getNormalizedSelectCandidate(that._get(that._focus()) || moveIndex || 0);\n\n                    that._select(selectCandidate, true).done(function() {\n                        var done = function() {\n                            if (!that.popup.visible()) {\n                                that._blur();\n                            }\n\n                            if (that._cascadedValue === null) {\n                                that._cascadedValue = that.value();\n                            } else {\n                                that._cascadedValue = that.dataItem() ? that.dataItem()[that.options.dataValueField] || that.dataItem() : null;\n                            }\n                        };\n\n                        if (that.trigger(SELECT, { dataItem: that._getNormalizedDataItem(selectCandidate), item: that._focus() })) {\n                            that._select(current).done(done);\n                        } else {\n                            done();\n                        }\n                    });\n                }\n\n                e.preventDefault();\n                pressed = true;\n            } else if (key === keys.ENTER || key === keys.TAB) {\n                if (that.popup.visible()) {\n                    e.preventDefault();\n                }\n\n                current = that._focus();\n                dataItem = that.dataItem();\n\n                if (!that.popup.visible() && (!dataItem || that.text() !== that._text(dataItem))) {\n                    current = null;\n                }\n\n                var activeFilter = that.filterInput && that.filterInput[0] === activeElement();\n                var selection;\n\n                if (current) {\n                    dataItem = listView.dataItemByIndex(listView.getElementIndex(current));\n                    var shouldTrigger = true;\n\n                    if (dataItem) {\n                        shouldTrigger = that._value(dataItem) !== List.unifyType(that.value(), typeof that._value(dataItem));\n                    }\n\n                    if (shouldTrigger && that.trigger(SELECT, { dataItem: dataItem, item: current })) {\n                        return;\n                    }\n\n                    selection = that._select(current);\n                } else if (that.input) {\n                    if (that._syncValueAndText() || that._isSelect) {\n                        that._accessor(that.input.val());\n                    }\n                    that.listView.value(that.input.val());\n                }\n\n                if (that._focusElement) {\n                    that._focusElement(that.wrapper);\n                }\n\n                if (activeFilter && key === keys.TAB) {\n                    that.wrapper.focusout();\n                } else {\n                    if (selection && typeof selection.done === \"function\") {\n                        selection.done(function() {\n                            that._blur();\n                        });\n                    } else {\n                        that._blur();\n                    }\n                }\n\n                that.close();\n                pressed = true;\n            } else if (key === keys.ESC) {\n                if (that.popup.visible()) {\n                    e.preventDefault();\n                }\n                that.close();\n                pressed = true;\n            } else if (that.popup.visible() && (key === keys.PAGEDOWN || key === keys.PAGEUP)) {\n                e.preventDefault();\n\n                var direction = key === keys.PAGEDOWN ? 1 : -1;\n                listView.scrollWith(direction * listView.screenHeight());\n\n                pressed = true;\n            }\n\n            return pressed;\n        },\n\n        _fetchData: function() {\n            var that = this;\n            var hasItems = !!that.dataSource.view().length;\n\n            if (that._request || that.options.cascadeFrom) {\n                return;\n            }\n\n            if (!that.listView.bound() && !that._fetch && !hasItems) {\n                that._fetch = true;\n                that.dataSource.fetch().done(function() {\n                    that._fetch = false;\n                });\n            }\n        },\n\n        _options: function(data, optionLabel, value) {\n            var that = this,\n                element = that.element,\n                htmlElement = element[0],\n                length = data.length,\n                options = \"\",\n                option,\n                dataItem,\n                dataText,\n                dataValue,\n                idx = 0;\n\n            if (optionLabel) {\n                options = optionLabel;\n            }\n\n            for (; idx < length; idx++) {\n                option = \"<option\";\n                dataItem = data[idx];\n                dataText = that._text(dataItem);\n                dataValue = that._value(dataItem);\n\n                if (dataValue !== undefined$1) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n\n                option += \">\";\n\n                if (dataText !== undefined$1) {\n                    option += htmlEncode(dataText);\n                }\n\n                option += \"</option>\";\n                options += option;\n            }\n\n            element.html(options);\n\n            if (value !== undefined$1) {\n                htmlElement.value = value;\n                if (htmlElement.value && !value) {\n                    htmlElement.selectedIndex = -1;\n                }\n            }\n\n            if (htmlElement.selectedIndex !== -1) {\n                option = getSelectedOption(htmlElement);\n\n                if (option) {\n                    option.setAttribute(SELECTED, SELECTED);\n                }\n            }\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _parentWidget: function() {\n            var name = this.options.name;\n\n            if (!this.options.cascadeFrom) {\n                return;\n            }\n\n            var parentElement = $(\"#\" + this.options.cascadeFrom);\n            var parent = parentElement.data(\"kendo\" + name);\n\n            if (!parent) {\n                for (var i = 0; i < alternativeNames[name].length; i += 1) {\n                    parent = parentElement.data(\"kendo\" + alternativeNames[name][i]);\n\n                    if (!!parent) {\n                        break;\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        _cascade: function() {\n            var that = this;\n            var options = that.options;\n            var cascade = options.cascadeFrom;\n            var parent;\n\n            if (cascade) {\n                parent = that._parentWidget();\n\n                if (!parent) {\n                    return;\n                }\n\n                that._cascadeHandlerProxy = that._cascadeHandler.bind(that);\n                that._cascadeFilterRequests = [];\n\n                options.autoBind = false;\n\n                parent.bind(\"set\", function() { //will cascade\n                    that.one(\"set\", function(e) { //get your value\n                        that._selectedValue = e.value || that._accessor();\n                    });\n                });\n\n                parent.first(CASCADE, that._cascadeHandlerProxy);\n\n                //refresh was called\n                if (parent.listView.bound()) {\n                    that._toggleCascadeOnFocus();\n                    that._cascadeSelect(parent);\n                } else {\n                    parent.one(DATA_BOUND, function() {\n                        that._toggleCascadeOnFocus();\n                        if (parent.popup.visible()) {\n                            parent._focused.trigger(FOCUS);\n                        }\n                    });\n\n                    if (!parent.value()) {\n                        that.enable(false);\n                    }\n                }\n            }\n        },\n\n        _toggleCascadeOnFocus: function() {\n            var that = this;\n            var parent = that._parentWidget();\n            var focusout = isIE && parent instanceof ui.DropDownList ? BLUR : FOCUSOUT;\n\n            parent._focused.add(parent.filterInput).on(FOCUS, function() {\n                parent.unbind(CASCADE, that._cascadeHandlerProxy);\n                parent.unbind(CHANGE, that._cascadeHandlerProxy);\n                parent.first(CHANGE, that._cascadeHandlerProxy);\n            });\n\n            parent._focused.add(parent.filterInput).on(focusout, function() {\n                parent.unbind(CHANGE, that._cascadeHandlerProxy);\n                parent.unbind(CASCADE, that._cascadeHandlerProxy);\n                parent.first(CASCADE, that._cascadeHandlerProxy);\n            });\n        },\n\n        _cascadeHandler: function(e) {\n            var parent = this._parentWidget();\n            var valueBeforeCascade = this.value();\n\n            this._userTriggered = e.userTriggered || parent._userTriggered;\n\n            if (this.listView.bound()) {\n                this._clearSelection(parent, true);\n            }\n\n            this._cascadeSelect(parent, valueBeforeCascade);\n        },\n\n        _cascadeChange: function(parent) {\n            var that = this;\n            var value = that._accessor() || that._selectedValue;\n\n            if (!that._cascadeFilterRequests.length) {\n                that._selectedValue = null;\n            }\n\n            if (that._userTriggered) {\n                that._clearSelection(parent, true);\n            } else if (value) {\n                if (value !== unifyType(that.listView.value()[0], typeof value)) {\n                    that.value(value);\n                }\n\n                if (!that.dataSource.view()[0] || that.selectedIndex === -1) {\n                    that._clearSelection(parent, true);\n                }\n            } else if (that.dataSource.flatView().length) {\n                that.select(that.options.index);\n            }\n\n            that.enable();\n            that._triggerCascade();\n            that._triggerChange();\n            that._userTriggered = false;\n        },\n\n        _cascadeSelect: function(parent, valueBeforeCascade) {\n            var that = this;\n            var dataItem = parent.dataItem();\n            var filterValue = dataItem ? dataItem[that.options.cascadeFromParentField] || parent._value(dataItem) : null;\n            var valueField = that.options.cascadeFromField || parent.options.dataValueField;\n            var expressions;\n\n            that._valueBeforeCascade = valueBeforeCascade !== undefined$1 ? valueBeforeCascade : that.value();\n\n            if (filterValue || filterValue === 0) {\n                expressions = that.dataSource.filter() || {};\n                removeFiltersForField(expressions, valueField);\n\n                var handler = function() {\n                    var currentHandler = that._cascadeFilterRequests.shift();\n                    if (currentHandler) {\n                        that.unbind('dataBound', currentHandler);\n                    }\n\n                    currentHandler = that._cascadeFilterRequests[0];\n                    if (currentHandler) {\n                        that.first('dataBound', currentHandler);\n                    }\n\n                    that._cascadeChange(parent);\n                };\n\n                that._cascadeFilterRequests.push(handler);\n\n                if (that._cascadeFilterRequests.length === 1) {\n                    that.first('dataBound', handler);\n                }\n\n                that._cascading = true;\n                that._filterSource({\n                    field: valueField,\n                    operator: \"eq\",\n                    value: filterValue\n                });\n                that._cascading = false;\n            } else {\n                that.enable(false);\n                that._clearSelection(parent);\n                that._triggerCascade();\n                that._triggerChange();\n                that._userTriggered = false;\n            }\n\n            that._refreshFloatingLabel();\n        }\n    });\n\n    var STATIC_LIST_NS = \".StaticList\";\n\n    var StaticList = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.element.attr(\"role\", \"listbox\")\n                        .on(CLICK + STATIC_LIST_NS, \"li\", this._click.bind(this))\n                        .on(MOUSEENTER + STATIC_LIST_NS, \"li\", function() { $(this).addClass(HOVER); })\n                        .on(MOUSELEAVE + STATIC_LIST_NS, \"li\", function() { $(this).removeClass(HOVER); });\n\n            if (options && options.ariaLabel) {\n                this.element.attr(ARIA_LABEL, options.ariaLabel);\n            } else if (options && options.ariaLabelledBy) {\n                this.element.attr(ARIA_LABELLEDBY, options.ariaLabelledBy);\n            }\n\n            if (support.touch) {\n                this._touchHandlers();\n            }\n\n            if (this.options.selectable === \"multiple\") {\n                this.element.attr(ARIA_MULTISELECTABLE, true);\n            }\n\n            if (this.options.columns && this.options.columns.length) {\n                var thead = this.element.parent().find('.k-table-thead');\n                var row = $('<tr class=\"k-table-group-row\">' +\n                    '<th class=\"k-table-th\" colspan=\"' + this.options.columns.length + '\"></th>' +\n                '</tr>');\n\n                thead.append(row);\n\n                this.header = row.find(\".k-table-th\");\n\n                this.content = this.element.wrap(\"<div class='k-table-body k-table-scroller' unselectable='on'></div>\").parent();\n\n                this.element.addClass(TABLE_LIST);\n            } else {\n                this.content = this.element.wrap(\"<div class='k-list-content k-list-scroller' unselectable='on'></div>\").parent();\n                this.header = this.content.before('<div class=\"k-list-group-sticky-header\" style=\"display:none\"></div>').prev();\n                this.element.addClass(LIST_UL);\n            }\n\n            this.bound(false);\n\n            this._optionID = kendo.guid();\n\n            this._selectedIndices = [];\n\n            this._view = [];\n            this._dataItems = [];\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value) {\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            this._getter();\n            this._templates();\n\n            this.setDataSource(this.options.dataSource);\n\n            this._createOnScrollProxy();\n        },\n\n        options: {\n            name: \"StaticList\",\n            dataValueField: null,\n            valuePrimitive: false,\n            selectable: true,\n            template: null,\n            groupTemplate: null,\n            fixedGroupTemplate: null,\n            ariaLabel: null,\n            ariaLabelledBy: null\n        },\n\n        events: [\n           CLICK,\n            CHANGE,\n           ACTIVATE,\n           DEACTIVATE,\n           DATA_BINDING,\n           DATA_BOUND,\n           SELECTED_ITEM_CHANGE\n        ],\n\n        setDataSource: function(source) {\n            var that = this;\n            var dataSource = source || {};\n            var value;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n            dataSource = kendo.data.DataSource.create(dataSource);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n\n                value = that.value();\n\n                that.value([]);\n                that.bound(false);\n\n                that.value(value);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n            }\n\n            that.setDSFilter(dataSource.filter());\n\n            that.dataSource = dataSource.bind(CHANGE, that._refreshHandler);\n            that._fixedHeader();\n        },\n\n        _touchHandlers: function() {\n            var that = this,\n                itemSelector = this.options.columns && this.options.columns.length ? ITEMSELECTORTABLE : ITEMSELECTOR,\n                startY, endY,\n                tapPosition = function(event) {\n                    return (event.originalEvent || event).changedTouches[0].pageY;\n                };\n\n            that.element.on(\"touchstart\" + STATIC_LIST_NS, function(e) {\n                startY = tapPosition(e);\n            });\n\n            that.element.on(\"touchend\" + STATIC_LIST_NS, function(e) {\n                if (e.isDefaultPrevented()) {\n                    return;\n                }\n\n                endY = tapPosition(e);\n\n                if (Math.abs(endY - startY) < 10) {\n                    that._touchTriggered = true;\n                    that._triggerClick($(e.target).closest(itemSelector).get(0));\n                }\n            });\n        },\n\n        skip: function() {\n            return this.dataSource.skip();\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._getter();\n            this._templates();\n            this._render();\n\n            if (options.label) {\n                this.label.setOptions(options.label);\n            } else if (options.label === false) {\n                this.label._unwrapFloating();\n                this._inputLabel.remove();\n                delete this._inputLabel;\n            }\n        },\n\n        destroy: function() {\n            this.element.off(STATIC_LIST_NS);\n\n            if (this._refreshHandler) {\n                this.dataSource.unbind(CHANGE, this._refreshHandler);\n            }\n\n            clearTimeout(this._scrollId);\n\n            Widget.fn.destroy.call(this);\n        },\n\n        dataItemByIndex: function(index) {\n            return this.dataSource.flatView()[index];\n        },\n\n        screenHeight: function() {\n            return this.content[0].clientHeight;\n        },\n\n        scrollToIndex: function(index) {\n            var item = this.element[0].children[index];\n\n            if (item) {\n                this.scroll(item);\n            }\n        },\n\n        scrollWith: function(value) {\n            this.content.scrollTop(this.content.scrollTop() + value);\n        },\n\n        scroll: function(item) {\n            if (!item) {\n                return;\n            }\n\n            if (item[0]) {\n                item = item[0];\n            }\n\n            var content = this.content[0],\n                itemOffsetTop = item.offsetTop,\n                itemOffsetHeight = item.offsetHeight,\n                contentScrollTop = content.scrollTop,\n                contentOffsetHeight = content.clientHeight,\n                bottomDistance = itemOffsetTop + itemOffsetHeight;\n\n                if (contentScrollTop > itemOffsetTop) {\n                    contentScrollTop = itemOffsetTop;\n                } else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {\n                    contentScrollTop = (bottomDistance - contentOffsetHeight);\n                }\n\n                content.scrollTop = contentScrollTop;\n        },\n\n        selectedDataItems: function(dataItems) {\n            if (dataItems === undefined$1) {\n                return this._dataItems.slice();\n            }\n\n            this._dataItems = dataItems;\n            this._values = this._getValues(dataItems);\n        },\n\n        _getValues: function(dataItems) {\n            var getter = this._valueGetter;\n\n            return $.map(dataItems, function(dataItem) {\n                return getter(dataItem);\n            });\n        },\n\n        focusNext: function() {\n            var current = this.focus();\n\n            if (!current) {\n                current = 0;\n            } else {\n                current = current.next();\n            }\n\n            this.focus(current);\n        },\n\n        focusPrev: function() {\n            var current = this.focus();\n\n            if (!current) {\n                current = this.element[0].children.length - 1;\n            } else {\n                current = current.prev();\n            }\n\n            this.focus(current);\n        },\n\n        focusFirst: function() {\n            this.focus(this.element[0].children[0]);\n        },\n\n        focusLast: function() {\n            this.focus(last(this.element[0].children));\n        },\n\n        focus: function(candidate) {\n            var that = this;\n            var id = that._optionID;\n            var hasCandidate;\n\n            if (candidate === undefined$1) {\n                return that._current;\n            }\n\n            candidate = last(that._get(candidate));\n            candidate = $(this.element[0].children[candidate]);\n\n            if (that._current) {\n                that._current\n                    .removeClass(FOCUSED)\n                    .removeAttr(ID);\n\n                that.trigger(DEACTIVATE);\n            }\n\n            hasCandidate = !!candidate[0];\n\n            if (hasCandidate) {\n                candidate.addClass(FOCUSED);\n                that.scroll(candidate);\n\n                candidate.attr(\"id\", id);\n            }\n\n            that._current = hasCandidate ? candidate : null;\n            that.trigger(ACTIVATE);\n        },\n\n        focusIndex: function() {\n            return this.focus() ? this.focus().index() : undefined$1;\n        },\n\n        skipUpdate: function(skipUpdate) {\n            this._skipUpdate = skipUpdate;\n        },\n\n        select: function(indices) {\n            var that = this;\n            var selectable = that.options.selectable;\n            var singleSelection = selectable !== \"multiple\" && selectable !== false;\n            var selectedIndices = that._selectedIndices;\n            var uiSelectedIndices = [this.element.find(\".k-selected\").index()];\n\n            var added = [];\n            var removed = [];\n            var result;\n\n            if (indices === undefined$1) {\n                return selectedIndices.slice();\n            }\n\n            indices = that._get(indices);\n\n            if (indices.length === 1 && indices[0] === -1) {\n                indices = [];\n            }\n\n            var deferred = $.Deferred().resolve();\n            var filtered = that.isFiltered();\n\n            if (filtered && !singleSelection && that._deselectFiltered(indices)) {\n                return deferred;\n            }\n\n            if (singleSelection && !filtered &&\n                $.inArray(last(indices), selectedIndices) !== -1 && $.inArray(last(indices), uiSelectedIndices) !== -1) {\n\n                if (that._dataItems.length && that._view.length) {\n                    that._dataItems = [that._view[selectedIndices[0]].item];\n                }\n\n                return deferred;\n            }\n\n            result = that._deselect(indices);\n\n            removed = result.removed;\n            indices = result.indices;\n\n            if (indices.length) {\n                if (singleSelection) {\n                    indices = [last(indices)];\n                }\n\n                added = that._select(indices);\n            }\n\n            if (added.length || removed.length) {\n                that._valueComparer = null;\n                that.trigger(CHANGE, {\n                    added: added,\n                    removed: removed\n                });\n            }\n\n            return deferred;\n        },\n\n        removeAt: function(position) {\n            this._selectedIndices.splice(position, 1);\n            this._values.splice(position, 1);\n            this._valueComparer = null;\n\n            return {\n                position: position,\n                dataItem: this._dataItems.splice(position, 1)[0]\n            };\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n\n            this._valueComparer = null;\n        },\n\n        value: function(value) {\n            var that = this;\n            var deferred = that._valueDeferred;\n            var indices;\n\n            if (value === undefined$1) {\n                return that._values.slice();\n            }\n\n            that.setValue(value);\n\n            if (!deferred || deferred.state() === \"resolved\") {\n                that._valueDeferred = deferred = $.Deferred();\n            }\n\n            if (that.bound()) {\n                indices = that._valueIndices(that._values);\n\n                if (that.options.selectable === \"multiple\") {\n                    that.select(-1);\n                }\n\n                that.select(indices);\n\n                deferred.resolve();\n            }\n\n            that._skipUpdate = false;\n\n            return deferred;\n        },\n\n        items: function() {\n            return this.element.children(ITEMSELECTOR);\n        },\n\n        _click: function(e) {\n            if (this._touchTriggered)\n            {\n                this._touchTriggered = false;\n                return;\n            }\n\n            if (!e.isDefaultPrevented()) {\n                this._triggerClick(e.currentTarget);\n            }\n        },\n\n        _createOnScrollProxy: function() {\n            var onScrollProxy = function() {\n                var that = this;\n                clearTimeout(that._scrollId);\n\n                that._scrollId = setTimeout(function() {\n                    that._renderHeader();\n                }, 50);\n            };\n\n            this._onScroll = onScrollProxy.bind(this);\n        },\n\n        _triggerClick: function(item) {\n            if (!this.trigger(CLICK, { item: $(item) })) {\n                this.select(item);\n            }\n        },\n\n        _valueExpr: function(type, values) {\n            var that = this;\n            var idx = 0;\n\n            var body;\n            var comparer;\n            var normalized = [];\n\n            if (!that._valueComparer || that._valueType !== type) {\n                that._valueType = type;\n\n                for (; idx < values.length; idx++) {\n                    normalized.push(unifyType(values[idx], type));\n                }\n\n                body = \"for (var idx = 0; idx < \" + normalized.length + \"; idx++) {\" +\n                        \" if (current === values[idx]) {\" +\n                        \"   return idx;\" +\n                        \" }\" +\n                        \"} \" +\n                        \"return -1;\";\n\n                comparer = new Function(\"current\", \"values\", body);\n\n                that._valueComparer = function(current) {\n                    return comparer(current, normalized);\n                };\n            }\n\n            return that._valueComparer;\n        },\n\n        _dataItemPosition: function(dataItem, values) {\n            var value = this._valueGetter(dataItem);\n\n            var valueExpr = this._valueExpr(typeof value, values);\n\n            return valueExpr(value);\n        },\n\n        _getter: function() {\n            this._valueGetter = kendo.getter(this.options.dataValueField);\n        },\n\n        _deselect: function(indices) {\n            var that = this;\n            var children = that.element[0].children;\n            var selectable = that.options.selectable;\n            var selectedIndices = that._selectedIndices;\n            var dataItems = that._dataItems;\n            var values = that._values;\n            var removed = [];\n            var i = 0;\n            var j;\n\n            var index, selectedIndex;\n            var removedIndices = 0;\n\n            indices = indices.slice();\n\n            if (selectable === true || !indices.length) {\n                for (; i < selectedIndices.length; i++) {\n                    $(children[selectedIndices[i]]).removeClass(KSELECTED).attr(ARIA_SELECTED, false);\n\n                    removed.push({\n                        position: i,\n                        dataItem: dataItems[i]\n                    });\n                }\n\n                that._values = [];\n                that._dataItems = [];\n                that._selectedIndices = [];\n            } else if (selectable === \"multiple\") {\n                for (; i < indices.length; i++) {\n                    index = indices[i];\n\n                    if (!$(children[index]).hasClass(KSELECTED)) {\n                        continue;\n                    }\n\n                    for (j = 0; j < selectedIndices.length; j++) {\n                        selectedIndex = selectedIndices[j];\n\n                        if (selectedIndex === index) {\n                            $(children[selectedIndex]).removeClass(KSELECTED).attr(ARIA_SELECTED, false);\n                            var dataItem = this._view[index].item;\n                            var position = this._dataItemPosition(dataItem, this._values);\n\n                            removed.push({\n                                position: position,\n                                dataItem: dataItem\n                            });\n\n                            dataItems.splice(j, 1);\n                            selectedIndices.splice(j, 1);\n                            indices.splice(i, 1);\n                            values.splice(j, 1);\n\n                            removedIndices += 1;\n                            i -= 1;\n                            j -= 1;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            return {\n                indices: indices,\n                removed: removed\n            };\n        },\n\n        _deselectFiltered: function(indices) {\n            var children = this.element[0].children;\n            var dataItem, index, position;\n            var removed = [];\n            var idx = 0;\n\n            for (; idx < indices.length; idx++) {\n                index = indices[idx];\n\n                dataItem = this._view[index].item;\n                position = this._dataItemPosition(dataItem, this._values);\n\n                if (position > -1) {\n                    removed.push(this.removeAt(position));\n                    $(children[index]).removeClass(KSELECTED);\n                }\n            }\n\n            if (removed.length) {\n                this.trigger(CHANGE, {\n                    added: [],\n                    removed: removed\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _select: function(indices) {\n            var that = this;\n            var children = that.element[0].children;\n            var data = that._view;\n            var dataItem, index;\n            var added = [];\n            var idx = 0;\n\n            if (last(indices) !== -1) {\n                that.focus(indices);\n            }\n\n            for (; idx < indices.length; idx++) {\n                index = indices[idx];\n                dataItem = data[index];\n\n                if (index === -1 || !dataItem) {\n                    continue;\n                }\n\n                dataItem = dataItem.item;\n\n                that._selectedIndices.push(index);\n                that._dataItems.push(dataItem);\n                that._values.push(that._valueGetter(dataItem));\n\n                $(children[index]).addClass(KSELECTED).attr(ARIA_SELECTED, true);\n\n                added.push({\n                    dataItem: dataItem\n                });\n            }\n\n            return added;\n        },\n\n        getElementIndex: function(element) {\n            return $(element).data(\"offset-index\");\n        },\n\n        _get: function(candidate) {\n            if (typeof candidate === \"number\") {\n                candidate = [candidate];\n            } else if (!isArray(candidate)) {\n                candidate = this.getElementIndex(candidate);\n                candidate = [candidate !== undefined$1 ? candidate : -1];\n            }\n\n            return candidate;\n        },\n\n        _template: function() {\n            var that = this;\n            var options = that.options;\n            var template = options.template;\n\n            if (!template) {\n                template = kendo.template('<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-list-item\"><span class=\"k-list-item-text\">${' + kendo.expr(options.dataTextField, \"data\") + \"}</span></li>\", { useWithBlock: false });\n            } else {\n                template = kendo.template(template);\n                template = function(data) {\n                    return '<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-list-item\">' + template(data) + \"</li>\";\n                };\n            }\n\n            return template;\n        },\n\n        _templates: function() {\n            var template;\n            var options = this.options;\n            var templates = {\n                template: options.template,\n                groupTemplate: options.groupTemplate,\n                fixedGroupTemplate: options.fixedGroupTemplate\n            };\n\n            if (options.columns) {\n                for (var i = 0; i < options.columns.length; i++) {\n                    var currentColumn = options.columns[i];\n                    var templateText = currentColumn.field ? currentColumn.field.toString() : TEXT;\n\n                    templates[\"column\" + i] = currentColumn.template || \"#: \" + templateText + \"#\";\n                }\n            }\n\n            for (var key in templates) {\n                template = templates[key];\n                if (template && typeof template !== \"function\") {\n                    templates[key] = kendo.template(template);\n                }\n            }\n\n            this.templates = templates;\n        },\n\n        _normalizeIndices: function(indices) {\n            var newIndices = [];\n            var idx = 0;\n\n            for (; idx < indices.length; idx++) {\n                if (indices[idx] !== undefined$1) {\n                    newIndices.push(indices[idx]);\n                }\n            }\n\n            return newIndices;\n        },\n\n        _valueIndices: function(values, indices) {\n            var data = this._view;\n            var idx = 0;\n            var index;\n\n            indices = indices ? indices.slice() : [];\n\n            if (!values.length) {\n                return [];\n            }\n\n            for (; idx < data.length; idx++) {\n                index = this._dataItemPosition(data[idx].item, values);\n\n                if (index !== -1) {\n                    indices[index] = idx;\n                }\n            }\n\n            return this._normalizeIndices(indices);\n        },\n\n        _firstVisibleItem: function() {\n            var element = this.element[0];\n            var content = this.content[0];\n            var scrollTop = content.scrollTop;\n            var itemHeight = $(element.children[0]).height();\n            var itemIndex = Math.floor(scrollTop / itemHeight) || 0;\n            var item = element.children[itemIndex] || element.lastChild;\n            var forward = item.offsetTop < scrollTop;\n\n            while (item) {\n                if (forward) {\n                    if ((item.offsetTop + itemHeight) > scrollTop || !item.nextSibling) {\n                        break;\n                    }\n\n                    item = item.nextSibling;\n                } else {\n                    if (item.offsetTop <= scrollTop || !item.previousSibling) {\n                        break;\n                    }\n\n                    item = item.previousSibling;\n                }\n            }\n\n            return this._view[$(item).data(\"offset-index\")];\n        },\n\n        _fixedHeader: function() {\n            if (this.isGrouped() && this.templates.fixedGroupTemplate) {\n                if (this.header.closest(GROUP_ROW_SEL).length) {\n                    this.header.closest(GROUP_ROW_SEL).show();\n                } else {\n                    this.header.show();\n                }\n\n                this.content.scroll(this._onScroll);\n            } else {\n                if (this.header.closest(GROUP_ROW_SEL).length) {\n                    this.header.closest(GROUP_ROW_SEL).hide();\n                } else {\n                    this.header.hide();\n                }\n\n                this.content.off(\"scroll\", this._onScroll);\n            }\n        },\n\n        _renderHeader: function() {\n            var template = this.templates.fixedGroupTemplate;\n            if (!template) {\n                return;\n            }\n\n            var visibleItem = this._firstVisibleItem();\n\n            if (visibleItem && visibleItem.group.toString().length) {\n                this.header.html(template(visibleItem.group));\n            }\n        },\n\n        _renderItem: function(context) {\n            var item = '<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" ';\n\n            var dataItem = context.item;\n            var notFirstItem = context.index !== 0;\n            var selected = context.selected;\n            var isGrouped = this.isGrouped();\n            var hasColumns = this.options.columns && this.options.columns.length;\n            var altRow = context.index % 2 === 1 ? \" k-table-alt-row\" : \"\";\n\n            if (hasColumns) {\n                item += ('class=\"k-table-row' + altRow);\n            } else {\n                item += 'class=\"k-list-item';\n            }\n\n            if (notFirstItem && context.newGroup) {\n                item += ' k-first';\n            }\n\n            if (context.isLastGroupedItem && hasColumns) {\n                item += ' k-last';\n            }\n\n            if (selected) {\n                item += ' k-selected';\n            }\n\n            item += '\" aria-selected=\"' + (selected ? \"true\" : \"false\") + '\" data-offset-index=\"' + context.index + '\">';\n            if (hasColumns) {\n                item += this._renderColumns(dataItem);\n            } else {\n                item += '<span class=\"k-list-item-text\">';\n                item += this.templates.template(dataItem);\n                item += '</span>';\n            }\n\n            if (notFirstItem && context.newGroup) {\n                if (hasColumns) {\n                    item += '<span class=\"k-table-td k-table-group-td\"><span>' + this.templates.groupTemplate(context.group) + '</span></span>';\n                } else {\n                    item += '<div class=\"k-list-item-group-label\">' + this.templates.groupTemplate(context.group) + '</div>';\n                }\n            } else if (isGrouped && hasColumns) {\n                item += '<span class=\"k-table-td k-table-spacer-td\"></span>';\n            }\n\n            return item + \"</li>\";\n        },\n\n        _renderColumns: function(dataItem) {\n            var item = \"\";\n\n            for (var i = 0; i < this.options.columns.length; i++) {\n                var currentWidth = this.options.columns[i].width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n\n                if (currentWidth && !isNaN(currentWidthInt)) {\n                    widthStyle += \"style='width:\";\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                    widthStyle += \";'\";\n                }\n                item += \"<span class='k-table-td' \" + widthStyle + \">\";\n                item += this.templates[\"column\" + i](dataItem);\n                item += \"</span>\";\n            }\n\n            return item;\n        },\n\n        _render: function() {\n            var html = \"\";\n\n            var i = 0;\n            var idx = 0;\n            var context;\n            var dataContext = [];\n            var view = this.dataSource.view();\n            var values = this.value();\n\n            var group, newGroup, j;\n            var isGrouped = this.isGrouped();\n\n            if (isGrouped) {\n                for (i = 0; i < view.length; i++) {\n                    group = view[i];\n                    newGroup = true;\n\n                    for (j = 0; j < group.items.length; j++) {\n                        context = {\n                            selected: this._selected(group.items[j], values),\n                            item: group.items[j],\n                            group: group.value,\n                            newGroup: newGroup,\n                            isLastGroupedItem: j === group.items.length - 1,\n                            index: idx };\n                        dataContext[idx] = context;\n                        idx += 1;\n\n                        html += this._renderItem(context);\n                        newGroup = false;\n                    }\n                }\n            } else {\n                for (i = 0; i < view.length; i++) {\n                    context = { selected: this._selected(view[i], values), item: view[i], index: i };\n\n                    dataContext[i] = context;\n\n                    html += this._renderItem(context);\n                }\n            }\n\n            this._view = dataContext;\n\n            this.element[0].innerHTML = html;\n\n            if (isGrouped && dataContext.length) {\n                this._renderHeader();\n            }\n        },\n\n        _selected: function(dataItem, values) {\n            var select = !this.isFiltered() || this.options.selectable === \"multiple\";\n            return select && this._dataItemPosition(dataItem, values) !== -1;\n        },\n\n        setDSFilter: function(filter) {\n            this._lastDSFilter = extend({}, filter);\n        },\n\n        isFiltered: function() {\n            if (!this._lastDSFilter) {\n                this.setDSFilter(this.dataSource.filter());\n            }\n\n            return !kendo.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter);\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var action = e && e.action;\n            var skipUpdateOnBind = that.options.skipUpdateOnBind;\n            var isItemChange = action === \"itemchange\";\n            var result;\n\n            that.trigger(DATA_BINDING);\n            that._angularItems(\"cleanup\");\n\n            that._fixedHeader();\n\n            that._render();\n\n            that.bound(true);\n\n            if (isItemChange || action === \"remove\") {\n                result = mapChangedItems(that._dataItems, e.items);\n\n                if (result.changed.length) {\n                    if (isItemChange) {\n                        that.trigger(SELECTED_ITEM_CHANGE, {\n                            items: result.changed\n                        });\n                    } else {\n                        that.value(that._getValues(result.unchanged));\n                    }\n                }\n            } else if (that.isFiltered() || that._skipUpdate || that._emptySearch) {\n                that.focus(0);\n                if (that._skipUpdate) {\n                    that._skipUpdate = false;\n                    that._selectedIndices = that._valueIndices(that._values, that._selectedIndices);\n                }\n            } else if (!skipUpdateOnBind && (!action || action === \"add\")) {\n                that.value(that._values);\n            }\n\n            if (that._valueDeferred) {\n                that._valueDeferred.resolve();\n            }\n\n            that._angularItems(\"compile\");\n            that.trigger(DATA_BOUND);\n        },\n\n        bound: function(bound) {\n            if (bound === undefined$1) {\n                return this._bound;\n            }\n\n            this._bound = bound;\n        },\n\n        isGrouped: function() {\n            return (this.dataSource.group() || []).length;\n        }\n    });\n\n    ui.plugin(StaticList);\n\n    function last(list) {\n        return list[list.length - 1];\n    }\n\n    function getSelectedOption(select) {\n        var index = select.selectedIndex;\n        return index > -1 ? select.options[index] : {};\n    }\n\n    function mapChangedItems(selected, itemsToMatch) {\n        var itemsLength = itemsToMatch.length;\n        var selectedLength = selected.length;\n        var dataItem;\n        var found;\n        var i, j;\n\n        var changed = [];\n        var unchanged = [];\n\n        if (selectedLength) {\n            for (i = 0; i < selectedLength; i++) {\n                dataItem = selected[i];\n                found = false;\n\n                for (j = 0; j < itemsLength; j++) {\n                    if (dataItem === itemsToMatch[j]) {\n                        found = true;\n                        changed.push({ index: i, item: dataItem });\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    unchanged.push(dataItem);\n                }\n            }\n        }\n\n        return {\n            changed: changed,\n            unchanged: unchanged\n        };\n    }\n\n    function isValidFilterExpr(expression) {\n        if (!expression || $.isEmptyObject(expression)) {\n            return false;\n        }\n\n        if (expression.filters && !expression.filters.length) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function removeFiltersForField(expression, field) {\n        var filters;\n        var found = false;\n\n        if (expression.filters) {\n            filters = $.grep(expression.filters, function(filter) {\n                found = removeFiltersForField(filter, field);\n                if (filter.filters) {\n                    return filter.filters.length;\n                } else {\n                    return filter.field != field;\n                }\n            });\n\n            if (!found && expression.filters.length !== filters.length) {\n                found = true;\n            }\n\n            expression.filters = filters;\n        }\n\n        return found;\n    }\n\n    kendo.cssProperties.registerPrefix(\"List\", \"k-list-\");\n\n})(window.kendo.jQuery);\n"]}