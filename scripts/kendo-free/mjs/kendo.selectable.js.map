{"version":3,"file":"kendo.selectable.js","names":["__meta__","id","name","category","depends","advanced","$","undefined$1","kendo","window","Widget","ui","abs","Math","ARIASELECTED","SELECTED","ACTIVE","SELECTABLE","CHANGE","UNSELECT","UNSELECTING","msie","support","browser","supportEventDelegation","extend","on","find","trigger","end","off","Selectable","init","element","options","multiple","dragToSelect","that","this","fn","call","_marquee","_lastActive","addClass","relatedTarget","userEvents","UserEvents","global","allowSelection","filter","tap","_tap","bind","touchAction","_start","_move","_end","_select","events","inputSelectors","noop","ignoreOverlapped","addIdToRanges","_isElement","target","idx","elements","length","result","e","selected","ctrlKey","event","metaKey","shiftKey","selectedClass","whichCode","which","buttonCode","button","closest","_allowSelection","hasClass","add","_lastRange","compareElements","selectRange","_firstSelectee","_notify","_unselect","value","clear","_downTarget","currentElement","useAllItems","_items","sender","capture","appendTo","document","body","css","left","x","client","top","y","width","height","_selectElement","cancel","position","startLocation","location","initialDelta","_invalidateSelectables","preventDefault","rangeSelectedAttr","attr","uid","guid","remove","removeClass","i","_currentlyActive","related","toSelect","items","eq","collision","_collidesWithActiveElement","push","marqueeRect","activeElementRect","activeElements","elemRect","getBoundingClientRect","leftRight","isRtl","tempRect","right","bottom","overlaps","val","selectElement","each","selectedRanges","map","_","elem","rangeId","mapLocation","selectedSingleItems","toArray","preventNotify","isPrevented","aria","args","removeAttr","_activeElement","is","resetTouchEvents","start","tmp","continuousItems","inArray","destroy","toCompare","elementPosition","getOffset","_outerWidth","_outerHeight","firstRect","secondRect","parseOptions","selectable","selectableMode","mode","asLowerString","toLowerCase","indexOf","cell","plugin","jQuery"],"sources":["kendo.selectable.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.userevents.js';\n\nvar __meta__ = {\n    id: \"selectable\",\n    name: \"Selectable\",\n    category: \"framework\",\n    depends: [ \"core\", \"userevents\" ],\n    advanced: true\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        abs = Math.abs,\n        ARIASELECTED = \"aria-selected\",\n        SELECTED = \"k-selected\",\n        ACTIVE = \"k-selecting\",\n        SELECTABLE = \"k-selectable\",\n        CHANGE = \"change\",\n        NS = \".kendoSelectable\",\n        UNSELECT = \"unselect\",\n        UNSELECTING = \"k-unselecting\",\n        INPUTSELECTOR = \"input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up,label.k-checkbox-label.k-no-text,.k-icon.k-i-collapse,.k-icon.k-i-expand,span.k-numeric-wrap,.k-focusable\",\n        msie = kendo.support.browser.msie,\n        supportEventDelegation = false,\n        extend = $.extend;\n\n        (function($) {\n            (function() {\n                $('<div class=\"parent\"><span></span></div>')\n                .on(\"click\", \">*\", function() {\n                    supportEventDelegation = true;\n                })\n                .find(\"span\")\n                .trigger(\"click\")\n                .end()\n                .off();\n            })();\n        })($);\n\n    var Selectable = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                multiple,\n                dragToSelect;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._marquee = $(\"<div class='k-marquee'><div class='k-marquee-color'></div></div>\");\n            that._lastActive = null;\n            that.element.addClass(SELECTABLE);\n\n            that.relatedTarget = that.options.relatedTarget;\n\n            multiple = that.options.multiple;\n            dragToSelect = that.options.dragToSelect;\n\n            that.userEvents = new kendo.UserEvents(that.element, {\n                global: true,\n                allowSelection: true,\n                filter: (!supportEventDelegation ? \".\" + SELECTABLE + \" \" : \"\") + that.options.filter,\n                tap: that._tap.bind(that),\n                touchAction: multiple ? \"none\" : \"pan-x pan-y\"\n            });\n\n            if (multiple) {\n                if (dragToSelect) {\n                    that.userEvents\n                        .bind(\"start\", that._start.bind(that))\n                        .bind(\"move\", that._move.bind(that))\n                        .bind(\"end\", that._end.bind(that));\n                }\n                that.userEvents\n                   .bind(\"select\", that._select.bind(that));\n            }\n        },\n\n        events: [CHANGE, UNSELECT],\n\n        options: {\n            name: \"Selectable\",\n            filter: \">*\",\n            inputSelectors: INPUTSELECTOR,\n            multiple: false,\n            dragToSelect: true,\n            relatedTarget: $.noop,\n            ignoreOverlapped: false,\n            addIdToRanges: false\n        },\n\n        _isElement: function(target) {\n            var elements = this.element;\n            var idx, length = elements.length, result = false;\n\n            target = target[0];\n\n            for (idx = 0; idx < length; idx ++) {\n                if (elements[idx] === target) {\n                    result = true;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _tap: function(e) {\n            var target = $(e.target),\n                that = this,\n                ctrlKey = e.event.ctrlKey || e.event.metaKey,\n                multiple = that.options.multiple,\n                shiftKey = multiple && e.event.shiftKey,\n                selectedClass = that.options.selectedClass || SELECTED,\n                selected,\n                whichCode = e.event.which,\n                buttonCode = e.event.button;\n\n            //in case of hierarchy or right-click\n            if (!that._isElement(target.closest(\".\" + SELECTABLE)) || whichCode && whichCode == 3 || buttonCode && buttonCode == 2) {\n                return;\n            }\n\n            if (!this._allowSelection(e.event.target)) {\n                return;\n            }\n\n            selected = target.hasClass(selectedClass);\n\n            target = target.add(that.relatedTarget(target));\n\n            if (!multiple) {\n                if (selected && ctrlKey) {\n                    that._unselect(target);\n                    that._notify(CHANGE, e);\n                } else if (!selected) {\n                    that.clear();\n                    that.value(target, e);\n                    that._notify(CHANGE, e);\n                }\n            } else {\n                if (shiftKey) {\n                    if (!that._lastRange || !compareElements(that._lastRange, target)) {\n                        that.selectRange(that._firstSelectee(), target, e);\n                        that._notify(CHANGE, e);\n                    }\n                    that._lastRange = target;\n                } else {\n                    that._lastRange = null;\n                    if (selected && ctrlKey) {\n                        that._unselect(target);\n                        that._notify(CHANGE, e);\n                    } else if (ctrlKey) {\n                        that.value(target, e);\n                        that._notify(CHANGE, e);\n                    } else if (!selected || that.value().length > 1) {\n                        that.clear();\n                        that.value(target, e);\n                        that._notify(CHANGE, e);\n                    }\n\n                    that._lastActive = that._downTarget = target;\n                }\n            }\n        },\n\n        _start: function(e) {\n            var that = this,\n                target = $(e.target),\n                selectedClass = that.options.selectedClass || SELECTED,\n                selected = target.hasClass(selectedClass),\n                currentElement,\n                ctrlKey = e.event.ctrlKey || e.event.metaKey;\n\n            if (!this._allowSelection(e.event.target)) {\n                return;\n            }\n\n            that._downTarget = target;\n\n            //in case of hierarchy\n            if (!that._isElement(target.closest(\".\" + SELECTABLE))) {\n                that.userEvents.cancel();\n                return;\n            }\n\n            if (that.options.useAllItems) {\n                that._items = that.element.find(that.options.filter);\n            } else {\n                currentElement = target.closest(that.element);\n                that._items = currentElement.find(that.options.filter);\n            }\n\n            e.sender.capture();\n\n            that._marquee\n                .appendTo(document.body)\n                .css({\n                    left: e.x.client + 1,\n                    top: e.y.client + 1,\n                    width: 0,\n                    height: 0\n                });\n\n            if (!ctrlKey) {\n                that.clear();\n            }\n\n            target = target.add(that.relatedTarget(target));\n            if (selected) {\n                that._selectElement(target, true);\n                if (ctrlKey) {\n                    target.addClass(UNSELECTING);\n                }\n            }\n        },\n\n        _move: function(e) {\n            var that = this,\n                position = {\n                    left: e.x.startLocation > e.x.location ? e.x.location : e.x.startLocation,\n                    top: e.y.startLocation > e.y.location ? e.y.location : e.y.startLocation,\n                    width: abs(e.x.initialDelta),\n                    height: abs(e.y.initialDelta)\n                };\n\n            that._marquee.css(position);\n\n            that._invalidateSelectables(position, (e.event.ctrlKey || e.event.metaKey));\n\n            e.preventDefault();\n        },\n\n        _end: function(e) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\"),\n            uid = kendo.guid();\n\n            that._marquee.remove();\n\n            that._unselect(that.element\n                .find(that.options.filter + \".\" + UNSELECTING))\n                .removeClass(UNSELECTING);\n\n\n            var target = that.element.find(that.options.filter + \".\" + ACTIVE);\n            target = target.add(that.relatedTarget(target));\n\n            if (that.options.addIdToRanges) {\n                for (var i = 0; i < that._currentlyActive.length; i++) {\n                    $(that._currentlyActive[i]).attr(rangeSelectedAttr, uid);\n                }\n            }\n\n            if (!that._lastRange || !compareElements(that._lastRange, target)) {\n                that.value(target, e);\n                that._notify(CHANGE, e);\n            }\n            that._lastRange = target;\n            that._lastActive = that._downTarget;\n            that._items = null;\n        },\n\n        _invalidateSelectables: function(position, ctrlKey) {\n            var idx,\n                length,\n                target = this._downTarget[0],\n                items = this._items,\n                selectedClass = this.options.selectedClass || SELECTED,\n                related,\n                toSelect;\n\n            this._currentlyActive = [];\n\n            for (idx = 0, length = items.length; idx < length; idx ++) {\n                toSelect = items.eq(idx);\n                related = toSelect.add(this.relatedTarget(toSelect));\n\n                if (collision(toSelect, position)) {\n                    if (toSelect.hasClass(selectedClass)) {\n                        if (ctrlKey && target !== toSelect[0]) {\n                            related.removeClass(selectedClass).addClass(UNSELECTING);\n                        }\n                    } else if (!toSelect.hasClass(ACTIVE) && !toSelect.hasClass(UNSELECTING) && !this._collidesWithActiveElement(related, position)) {\n                        related.addClass(ACTIVE);\n                    }\n                    this._currentlyActive.push(related[0]);\n                } else {\n                    if (toSelect.hasClass(ACTIVE)) {\n                        related.removeClass(ACTIVE);\n                    } else if (ctrlKey && toSelect.hasClass(UNSELECTING)) {\n                        related.removeClass(UNSELECTING).addClass(selectedClass);\n                    }\n                }\n            }\n        },\n\n        _collidesWithActiveElement: function(element, marqueeRect) {\n            if (!this.options.ignoreOverlapped) {\n                return false;\n            }\n\n            var activeElements = this._currentlyActive;\n            var elemRect = element[0].getBoundingClientRect();\n            var activeElementRect;\n            var collision = false;\n            var isRtl = kendo.support.isRtl(element);\n            var leftRight = isRtl ? \"right\" : \"left\";\n            var tempRect = {};\n\n            marqueeRect.right = marqueeRect.left + marqueeRect.width;\n            marqueeRect.bottom = marqueeRect.top + marqueeRect.height;\n\n            for (var i = 0; i < activeElements.length; i++) {\n                activeElementRect = activeElements[i].getBoundingClientRect();\n                if (overlaps(elemRect, activeElementRect)) {\n                    tempRect[leftRight] = leftRight === \"left\" ? activeElementRect.right : activeElementRect.left;\n                    elemRect = extend({}, elemRect, tempRect);\n                    if (elemRect.left > elemRect.right) {\n                        return true;\n                    }\n                    collision = !overlaps(elemRect, marqueeRect);\n                }\n            }\n            return collision;\n        },\n\n        value: function(val) {\n            var that = this,\n                selectElement = that._selectElement.bind(that);\n\n            if (val) {\n                val.each(function() {\n                    selectElement(this);\n                });\n\n                return;\n            }\n\n            return that.element.find(that.options.filter + \".\" + (that.options.selectedClass || SELECTED));\n        },\n\n        selectedRanges: function() {\n            var that = this;\n            var rangeSelectedAttr = kendo.attr(\"range-selected\");\n            var map = {};\n\n            that.element.find(\"[\" + rangeSelectedAttr + \"]\").each(function(_, elem) {\n                var rangeId = $(elem).attr(rangeSelectedAttr);\n                var mapLocation = map[rangeId];\n\n                if (!mapLocation) {\n                    mapLocation = map[rangeId] = [];\n                }\n\n                mapLocation.push($(elem));\n            });\n\n            return map;\n        },\n\n        selectedSingleItems: function() {\n            var that = this;\n            var rangeSelectedAttr = kendo.attr(\"range-selected\");\n\n            return that.element.find(that.options.filter + \".\" + (that.options.selectedClass || SELECTED) + \":not([\" + rangeSelectedAttr + \"])\").toArray().map(function(elem) {\n                return $(elem);\n            });\n        },\n\n        _firstSelectee: function() {\n            var that = this,\n                selected;\n\n            if (that._lastActive !== null) {\n                return that._lastActive;\n            }\n\n            selected = that.value();\n            return selected.length > 0 ?\n                    selected[0] :\n                    that.element.find(that.options.filter)[0];\n        },\n\n        _selectElement: function(element, preventNotify) {\n            var toSelect = $(element),\n                selectedClass = this.options.selectedClass || SELECTED,\n                isPrevented = !preventNotify && this._notify(\"select\", { element: element });\n\n            toSelect.removeClass(ACTIVE);\n            if (!isPrevented) {\n                 toSelect.addClass(selectedClass);\n\n                if (this.options.aria) {\n                    toSelect.attr(ARIASELECTED, true);\n                }\n            }\n        },\n\n        _notify: function(name, args) {\n            args = args || { };\n            return this.trigger(name, args);\n        },\n\n        _unselect: function(element) {\n            if (this.trigger(UNSELECT, { element: element })) {\n                return;\n            }\n\n            var rangeSelectedAttr = kendo.attr(\"range-selected\");\n\n            element.removeClass(this.options.selectedClass || SELECTED).removeAttr(rangeSelectedAttr);\n\n            if (this.options.aria) {\n                element.attr(ARIASELECTED, false);\n            }\n\n            return element;\n        },\n\n        _select: function(e) {\n            if (this._allowSelection(e.event.target)) {\n                if (!msie || (msie && !$(kendo._activeElement()).is(this.options.inputSelectors))) {\n                    e.preventDefault();\n                }\n            }\n        },\n\n        _allowSelection: function(target) {\n            if ($(target).is(this.options.inputSelectors)) {\n                this.userEvents.cancel();\n                this._downTarget = null;\n                return false;\n            }\n\n            return true;\n        },\n\n        resetTouchEvents: function() {\n            this.userEvents.cancel();\n        },\n\n        clear: function() {\n            var items = this.element.find(this.options.filter + \".\" + (this.options.selectedClass || SELECTED));\n            this._unselect(items);\n        },\n\n        selectRange: function(start, end) {\n            var that = this,\n                idx,\n                tmp,\n                items;\n\n            that.clear();\n\n            if (that.element.length > 1) {\n                items = that.options.continuousItems();\n            }\n\n            if (!items || !items.length) {\n                items = that.element.find(that.options.filter);\n            }\n\n            start = $.inArray($(start)[0], items);\n            end = $.inArray($(end)[0], items);\n\n            if (start > end) {\n                tmp = start;\n                start = end;\n                end = tmp;\n            }\n\n            if (!that.options.useAllItems) {\n                end += that.element.length - 1;\n            }\n\n            for (idx = start; idx <= end; idx ++ ) {\n                that._selectElement(items[idx], true);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.element.off(NS);\n\n            that.userEvents.destroy();\n\n            that._marquee = that._lastActive = that.element = that.userEvents = null;\n        }\n    });\n\n    Selectable.parseOptions = function(selectable) {\n        var selectableMode = selectable.mode || selectable;\n        var asLowerString = typeof selectableMode === \"string\" && selectableMode.toLowerCase();\n        return {\n            multiple: asLowerString && asLowerString.indexOf(\"multiple\") > -1,\n            cell: asLowerString && asLowerString.indexOf(\"cell\") > -1\n        };\n    };\n\n    function compareElements(element, toCompare) {\n\n        if (element.length !== toCompare.length) {\n            return false;\n        }\n\n        for (var i = 0; i < element.length; i++) {\n            if (element[i] !== toCompare[i]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function collision(element, position) {\n        if (!element.is(\":visible\")) {\n            return false;\n        }\n\n        var elementPosition = kendo.getOffset(element),\n            right = position.left + position.width,\n            bottom = position.top + position.height;\n\n        elementPosition.right = elementPosition.left + kendo._outerWidth(element);\n        elementPosition.bottom = elementPosition.top + kendo._outerHeight(element);\n\n        return !(elementPosition.left > right ||\n            elementPosition.right < position.left ||\n            elementPosition.top > bottom ||\n            elementPosition.bottom < position.top);\n    }\n\n    function overlaps(firstRect, secondRect) {\n        return !(firstRect.right <= secondRect.left ||\n            firstRect.left >= secondRect.right ||\n            firstRect.bottom <= secondRect.top ||\n            firstRect.top >= secondRect.bottom);\n    }\n\n    kendo.ui.plugin(Selectable);\n\n})(window.kendo.jQuery);\n"]}