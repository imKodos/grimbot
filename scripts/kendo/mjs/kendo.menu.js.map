{"version":3,"file":"kendo.menu.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","ui","activeElement","_activeElement","touch","support","mobileOS","isArray","Array","HierarchicalDataSource","data","MOUSEDOWN","CLICK","extend","each","template","keys","Widget","excludedNodesRegExp","NS","OPEN","MENU","LINK","LINK_SELECTOR","ICON_SELECTOR","LAST","CLOSE","TIMER","FIRST","IMAGE","SELECT","ZINDEX","ACTIVATE","DEACTIVATE","POINTERDOWN","pointers","msPointers","allPointers","CHANGE","ERROR","TOUCHSTART","MOUSEENTER","MOUSELEAVE","MOUSEWHEEL","RESIZE","resize","POPUP_ID_ATTR","POPUP_OPENER_ATTR","DOCUMENT_ELEMENT","document","documentElement","KENDOPOPUP","HOVERSTATE","FOCUSEDSTATE","DISABLEDSTATE","menuSelector","groupSelector","animationContainerSelector","popupSelector","allItemsSelector","itemSelector","availableItemsSelector","exclusionSelector","scrollButtonSelector","touchPointerTypes","DATABOUND","ARIA_EXPANDED","ROLE","bindings","text","url","spriteCssClass","imageUrl","imageAttr","content","rendering","wrapperCssClass","group","item","result","index","enabled","firstLevel","length","cssClass","attr","hasOwnProperty","selected","itemCssAttributes","attributes","imageCssAttributes","imgAttributes","toJSON","contentCssAttributes","contentAttr","defaultClasses","textClass","arrowClass","horizontal","groupAttributes","expanded","groupCssClass","contains","parent","child","e","updateItemClasses","addClass","children","filter","removeClass","empty","append","prop","contents","this","nodeName","match","nodeType","trim","nodeValue","wrapAll","idx","elm","wrap","updateArrow","updateFirstLast","find","remove","arrowCssClass","isRtl","hasClass","getArrowCssClass","updateHasAriaPopup","parents","parentLi","eq","removeAttr","getParentLiItems","parentsUntil","storeItemSelectEventHandler","element","options","selectHandler","select","isFunction","getItemSelectEventHandler","setItemData","items","i","popupOpenerSelector","popupGroupSelector","selector","getChildPopups","currentPopup","overflowWrapper","childPopupOpener","opener","popupId","popup","push","popupParentItem","popupElement","itemPopup","parentsScroll","current","scrollDirection","scroll","parentNode","isNaN","isPointerTouch","originalEvent","pointerType","removeSpacesBetweenItems","ul","Menu","DataBoundWidget","init","that","fn","call","wrapper","_accessors","_templates","_dataSource","_updateClasses","_animations","nextItemZIndex","_tabindex","_initOverflow","_attachMenuEventsHandlers","openOnClick","clicked","_ariaId","format","notify","events","animation","open","duration","close","orientation","direction","closeOnClick","hoverDelay","scrollable","popupCollision","_initData","dataSource","angular","elements","view","_overflowWrapper","_checkActiveProxy","_checkActiveElement","bind","on","_focusHandler","_click","_preventClose","_mouseenter","_mouseleave","_mousedown","_toggleHover","_keydown","_focus","_removeHoverItem","_mouseleavePopup","_mouseenterPopup","_documentClickHandler","_documentClick","_detachMenuEventsHandlers","off","backwardBtn","forwardBtn","isHorizontal","_openedPopups","_scrollWrapper","templates","scrollButton","add","appendTo","_initScrolling","initialWidth","outerWidth","initialCssWidth","style","width","setTimeout","_setOverflowWrapperWidth","_toggleScrollButtons","_popupsWrapper","wrapperCssWidth","css","wrapperWidth","menuWidth","borders","offsetWidth","clientWidth","Math","min","_reinitOverflow","distance","_destroyOverflow","popupWrapper","popupParentLi","unwrap","scrollElement","isNumeric","mouseWheelDistance","backward","forward","backwardDouble","forwardDouble","scrolling","touchEvents","value","scrollValue","scrollLeft","scrollTop","finish","animate","mouseenterHandler","mousedownHandler","ev","test","type","isTouch","stop","currentTarget","trigger","stopPropagation","preventDefault","eventMap","down","ctrlKey","shiftKey","altKey","wheelDelta","delta","ceil","floor","detail","round","mousewheelDelta","abs","_closeChildPopups","n","parseFloat","isFinite","currentScroll","scrollSize","offset","toggle","setOptions","destroy","enable","_toggleDisabled","disable","attemptGetItem","candidate","referenceItem","inserted","_insert","_childPopupElement","insertBefore","before","insertAfter","after","groups","plain","isPlainObject","ObservableObject","groupData","renderGroup","ObservableArray","map","get","renderItem","charAt","parentItems","container","_openAfterLoad","dataItem","loaded","_loading","one","getByUid","ns","hasChildren","load","replace","visiblePopups","closePopup","closest","siblings","li","clearTimeout","overflowPopup","first","_getPopup","is","_triggerEvent","windowHeight","height","maxHeight","_outerHeight","getShadows","bottom","overflow","nextZindex","zIndex","root","parentHorizontal","directions","split","output","origin","position","reverse","join","parseDirection","effects","openEffects","getEffectDirection","kendoPopup","activate","deactivate","_closing","sender","removeData","opacity","collision","anchor","_popupOpen","hide","mouseAndTouchPresent","_configurePopupOverflow","_hovered","_initPopupScrolling","popupOpener","_wrapPopupElement","groupId","Date","getTime","autosize","display","skipMouseEvents","scrollHeight","offsetHeight","_initPopupScrollButtons","scrollButtons","timeout","p","isEmptyObject","_closeParentPopups","last","_keyTriggered","_setPopupHeight","isFixed","popups","_initialHeight","location","_location","popupOuterHeight","popupOffsetTop","max","top","bottomScrollbar","innerHeight","dontClearClose","_isRootItem","toString","_forceClose","toggleClass","target","eventTarget","isEnter","indexOf","_closurePrevented","hoverItem","_hoverItem","_findRootParent","hasFocus","oldHoverItem","_oldHoverItem","matchesSelector","end","_itemHasChildren","pointerTouch","isParentClosing","delegateTarget","rootMenuItems","subMenuItems","relatedTarget","_","sibling","$window","browser","msie","toElement","clientX","clientY","stopImmediatePropagation","_closePopups","rootPopup","groupParent","innerPopup","_innerPopup","openHandle","childGroup","childGroupVisible","shouldCloseTheRootItem","targetElement","toUpperCase","formNode","link","itemElement","href","targetHref","sampleHref","isLink","isLocalLink","isTargetLink","_lastClickedElement","handled","_triggerSelect","childPopupId","_parentsUntil","enterKey","click","context","getParents","elem","overflowMenuParents","itemSelectEventData","_getEventData","isSelectItemDefaultPrevented","isDefaultPrevented","isSelectDefaultPrevented","_defaultPrevented","active","_moveHover","belongsToVertical","key","keyCode","ESC","_itemBelongsToVertival","RIGHT","LEFT","DOWN","_itemDown","UP","_itemUp","HOME","END","_itemEsc","ENTER","SPACEBAR","_moveHoverToRoot","TAB","menuIsVertical","nextItem","_scrollToItem","_itemRight","parentItem","nextAll","prevAll","_itemLeft","itemPosition","scrollDir","getSize","_outerWidth","currentScrollOffset","itemSize","itemOffset","ulSize","scrollButtonSize","_unbindDataSource","fields","field","create","_bindDataSource","fetch","_refreshHandler","refresh","_errorHandler","_error","unbind","findByUid","uid","node","action","parentElement","itemsToUpdate","updateProxy","_updateItem","removeProxy","_removeItem","_appendItems","forEach","nextElement","next","textField","_fieldAccessor","fieldName","fieldBindings","count","x","expr","fieldAccessor","itemWrapper","arrow","sprite","menu","renderContent","dataContentField","subGroup","renderItems","html","len","ContextMenu","_marker","guid","substring","_popup","_wire","_initialWidth","showOn","alignToAnchor","copyAnchorStyles","_showProxy","userEvents","mousedown","_closeProxy","y","visible","kendoStop","left","_configurePopupScrolling","downEvent","_mousedownProxy","visibility","_setPopupWidth","windowWidth","popupOuterWidth","popupOffsetLeft","shadow","maxWidth","right","arguments","_closeTimeoutProxy","focus","_showHandler","event","pageX","pageY","_eventOrigin","_targetChild","_closeHandler","sameTarget","containment","normalClick","which","_preventProxy","UserEvents","allowSelection","F10","_triggerProxy","noop","plugin","jQuery"],"sources":["kendo.menu.js"],"mappings":"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","sourcesContent":["import './kendo.popup.js';\nimport './kendo.data.js';\n\nvar __meta__ = {\n    id: \"menu\",\n    name: \"Menu\",\n    category: \"web\",\n    description: \"The Menu widget displays hierarchical data as a multi-level menu.\",\n    depends: [ \"popup\", \"data\", \"data.odata\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        activeElement = kendo._activeElement,\n        touch = (kendo.support.touch && kendo.support.mobileOS),\n        isArray = Array.isArray,\n        HierarchicalDataSource = kendo.data.HierarchicalDataSource,\n        MOUSEDOWN = \"mousedown\",\n        CLICK = \"click\",\n        DELAY = 30,\n        SCROLLSPEED = 50,\n        extend = $.extend,\n        each = $.each,\n        template = kendo.template,\n        keys = kendo.keys,\n        Widget = ui.Widget,\n        excludedNodesRegExp = /^(ul|a|div)$/i,\n        NS = \".kendoMenu\",\n        IMG = \"img\",\n        OPEN = \"open\",\n        MENU = \"k-menu\",\n        LINK = \"k-link k-menu-link\",\n        LINK_SELECTOR = \".k-link\",\n        ICON_SELECTOR = \".k-menu-expand-arrow-icon\",\n        LAST = \"k-last\",\n        CLOSE = \"close\",\n        TIMER = \"timer\",\n        FIRST = \"k-first\",\n        IMAGE = \"k-image\",\n        SELECT = \"select\",\n        ZINDEX = \"zIndex\",\n        ACTIVATE = \"activate\",\n        DEACTIVATE = \"deactivate\",\n        POINTERDOWN = \"touchstart\" + NS + \" MSPointerDown\" + NS + \" pointerdown\" + NS,\n        pointers = kendo.support.pointers,\n        msPointers = kendo.support.msPointers,\n        allPointers = msPointers || pointers,\n        CHANGE = \"change\",\n        ERROR = \"error\",\n        TOUCHSTART = kendo.support.touch ? \"touchstart\" : \"\",\n        MOUSEENTER = pointers ? \"pointerover\" : (msPointers ? \"MSPointerOver\" : \"mouseenter\"),\n        MOUSELEAVE = pointers ? \"pointerout\" : (msPointers ? \"MSPointerOut\" : \"mouseleave\"),\n        MOUSEWHEEL = \"DOMMouseScroll\" + NS + \" mousewheel\" + NS,\n        RESIZE = kendo.support.resize + NS,\n        SCROLLWIDTH = \"scrollWidth\",\n        SCROLLHEIGHT = \"scrollHeight\",\n        OFFSETWIDTH = \"offsetWidth\",\n        OFFSETHEIGHT = \"offsetHeight\",\n        POPUP_ID_ATTR = \"group\",\n        POPUP_OPENER_ATTR = \"groupparent\",\n        DOCUMENT_ELEMENT = $(document.documentElement),\n        KENDOPOPUP = \"kendoPopup\",\n        HOVERSTATE = \"k-hover\",\n        FOCUSEDSTATE = \"k-focus\",\n        DISABLEDSTATE = \"k-disabled\",\n        SELECTEDSTATE = \"k-selected\",\n        menuSelector = \".k-menu\",\n        groupSelector = \".k-menu-group\",\n        animationContainerSelector = \".k-animation-container\",\n        popupSelector = groupSelector + \",\" + animationContainerSelector,\n        allItemsSelector = \":not(.k-list) > .k-item:not([role='treeitem'])\",\n        disabledSelector = \".k-item.k-disabled\",\n        itemSelector = \".k-item\",\n        availableItemsSelector = \".k-item:not(.k-disabled)\",\n        linkSelector = \".k-item:not(.k-disabled) > .k-link\",\n        exclusionSelector = \":not(.k-item.k-separator)\",\n        templateSelector = \"div:not(.k-animation-container,.k-list-container)\",\n        scrollButtonSelector = \".k-menu-scroll-button\",\n        touchPointerTypes = { \"2\": 1, \"touch\": 1 },\n        STRING = \"string\",\n        DATABOUND = \"dataBound\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ROLE = \"role\",\n\n        bindings = {\n            text: \"dataTextField\",\n            url: \"dataUrlField\",\n            spriteCssClass: \"dataSpriteCssClassField\",\n            imageUrl: \"dataImageUrlField\",\n            imageAttr: \"dataImageAttrField\",\n            content: \"dataContentField\"\n        },\n\n        rendering = {\n            wrapperCssClass: function(group, item) {\n                var result = \"k-item k-menu-item\",\n                    index = item.index;\n\n                if (item.enabled === false) {\n                    result += \" k-disabled\";\n                }\n\n                if (group.firstLevel && index === 0) {\n                    result += \" k-first\";\n                }\n\n                if (index == group.length - 1) {\n                    result += \" k-last\";\n                }\n\n                if (item.cssClass) {\n                    result += \" \" + item.cssClass;\n                }\n\n                if (item.attr && item.attr.hasOwnProperty(\"class\")) {\n                    result += \" \" + item.attr[\"class\"];\n                }\n\n                if (item.selected) {\n                    result += \" \" + SELECTEDSTATE;\n                }\n\n                return result;\n            },\n\n            itemCssAttributes: function(item) {\n                var result = \"\";\n                var attributes = item.attr || {};\n\n                for (var attr in attributes) {\n                    if (attributes.hasOwnProperty(attr) && attr !== \"class\") {\n                        result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                    }\n                }\n\n                return result;\n            },\n\n            imageCssAttributes: function(imgAttributes) {\n                var result = \"\";\n                var attributes = imgAttributes && imgAttributes.toJSON ? imgAttributes.toJSON() : {};\n\n                if (!attributes['class']) {\n                    attributes['class'] = IMAGE;\n                } else {\n                    attributes['class'] += \" \" + IMAGE;\n                }\n\n                for (var attr in attributes) {\n                    if (attributes.hasOwnProperty(attr)) {\n                        result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                    }\n                }\n\n                return result;\n            },\n\n            contentCssAttributes: function(item) {\n                var result = \"\";\n                var attributes = item.contentAttr || {};\n                var defaultClasses = \"k-content k-group k-menu-group k-menu-group-md\";\n\n                if (!attributes['class']) {\n                    attributes['class'] = defaultClasses;\n                } else {\n                    attributes['class'] += \" \" + defaultClasses;\n                }\n\n                for (var attr in attributes) {\n                    if (attributes.hasOwnProperty(attr)) {\n                        result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                    }\n                }\n\n                return result;\n            },\n\n            textClass: function() {\n                return LINK;\n            },\n\n            arrowClass: function(item, group) {\n                var result = \"k-menu-expand-arrow-icon k-icon\";\n\n                if (group.horizontal) {\n                    result += \" k-i-arrow-s\";\n                } else {\n                    result += \" k-i-arrow-e\";\n                }\n\n                return result;\n            },\n\n            groupAttributes: function(group) {\n                return group.expanded !== true ? \" style='display:none'\" : \"\";\n            },\n\n            groupCssClass: function() {\n                return \"k-group k-menu-group k-menu-group-md\";\n            },\n\n            content: function(item) {\n                return item.content ? item.content : \"&nbsp;\";\n            }\n    };\n\n    function getEffectDirection(direction, root) {\n        direction = direction.split(\" \")[!root + 0] || direction;\n        return direction.replace(\"top\", \"up\").replace(\"bottom\", \"down\");\n    }\n\n    function parseDirection(direction, root, isRtl) {\n        direction = direction.split(\" \")[!root + 0] || direction;\n        var output = { origin: [\"bottom\", (isRtl ? \"right\" : \"left\")], position: [\"top\", (isRtl ? \"right\" : \"left\")] },\n            horizontal = /left|right/.test(direction);\n\n        if (horizontal) {\n            output.origin = [ \"top\", direction ];\n            output.position[1] = kendo.directions[direction].reverse;\n        } else {\n            output.origin[0] = direction;\n            output.position[0] = kendo.directions[direction].reverse;\n        }\n\n        output.origin = output.origin.join(\" \");\n        output.position = output.position.join(\" \");\n\n        return output;\n    }\n\n    function contains(parent, child) {\n        try {\n            return $.contains(parent, child);\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function updateItemClasses(item) {\n        item = $(item);\n        var omitWrap = item.attr(kendo.attr(\"omit-wrap\"));\n\n        if (omitWrap) {\n            return;\n        }\n\n        item.addClass(\"k-item k-menu-item\")\n            .children(IMG)\n            .addClass(IMAGE);\n\n        item\n            .children(\"a\")\n            .addClass(LINK)\n            .children(IMG)\n            .addClass(IMAGE);\n\n        item\n            .filter(\":not([disabled])\");\n\n        item\n            .filter(\".k-separator\")\n            .removeClass(\"k-menu-item\")\n            .addClass(\"k-menu-separator\")\n            .empty()\n            .append(\"&nbsp;\");\n\n        item\n            .filter(\"li[disabled]\")\n            .addClass(DISABLEDSTATE)\n            .prop(\"disabled\", false)\n            .attr(\"aria-disabled\", true);\n\n        if (!item.filter(\"[role]\").length) {\n            item.attr(ROLE, \"menuitem\");\n        }\n\n        if (!item.children(LINK_SELECTOR).length) {\n            item.contents() // exclude groups, real links, templates and empty text nodes\n                .filter(function() { return (!this.nodeName.match(excludedNodesRegExp) && !(this.nodeType === 3 && !kendo.trim(this.nodeValue))); })\n                .wrapAll(\"<span class='\" + LINK + \"'></span>\")\n                .filter(function(idx, elm) { return elm.nodeType === 3; })\n                .wrap(\"<span class='k-menu-link-text'></span>\");\n        }\n\n        updateArrow(item);\n        updateFirstLast(item);\n    }\n\n    function updateArrow(item) {\n        item = $(item);\n\n        item.find(\"> .k-link > .k-menu-expand-arrow > [class*=k-i-arrow]:not(.k-sprite)\").parent().remove();\n\n        item.filter(\":has(.k-menu-group)\")\n            .children(\".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))\")\n            .each(function() {\n                var item = $(this),\n                    arrowCssClass = getArrowCssClass(item);\n\n                item.append(\"<span aria-hidden='true' class='k-menu-expand-arrow'><span class='k-menu-expand-arrow-icon k-icon \" + arrowCssClass + \"'></span></span>\");\n            });\n    }\n\n    function getArrowCssClass(item) {\n        var arrowCssClass,\n            parent = item.parent().parent(),\n            isRtl = kendo.support.isRtl(parent);\n\n        if (parent.hasClass(MENU + \"-horizontal\")) {\n            arrowCssClass = \"k-i-arrow-s\";\n        } else {\n            if (isRtl) {\n                arrowCssClass = \"k-i-arrow-w\";\n            }\n            else {\n                arrowCssClass = \"k-i-arrow-e\";\n            }\n        }\n        return arrowCssClass;\n    }\n\n    function updateFirstLast(item) {\n        item = $(item);\n\n        item.filter(\".k-first:not(:first-child)\").removeClass(FIRST);\n        item.filter(\".k-last:not(:last-child)\").removeClass(LAST);\n        item.filter(\":first-child\").addClass(FIRST);\n        item.filter(\":last-child\").addClass(LAST);\n    }\n\n    function updateHasAriaPopup(parents) {\n        if (parents && parents.length) {\n            for (var index in parents) {\n                var parentLi = parents.eq(index);\n                if (parentLi.find(\"ul\").length) {\n                    parentLi.attr(\"aria-haspopup\", true);\n                } else {\n                    parentLi.removeAttr(\"aria-haspopup\");\n                }\n            }\n        }\n    }\n\n    function getParentLiItems(group) {\n        if (!group.hasClass(MENU)) {\n            return group.parentsUntil(\".\" + MENU, \"li\");\n        }\n    }\n\n    function storeItemSelectEventHandler(element, options) {\n        var selectHandler = getItemSelectEventHandler(options);\n        if (selectHandler) {\n            setItemData(element, selectHandler);\n        }\n\n        if (options.items) {\n            $(element).children(\"ul\").children(\"li\").each(function(i) {\n                storeItemSelectEventHandler(this, options.items[i]);\n            });\n        }\n    }\n\n    function setItemData(element, selectHandler) {\n        $(element).children(\".k-link\").data({\n            selectHandler: selectHandler\n        });\n    }\n\n    function getItemSelectEventHandler(options) {\n        var selectHandler = options.select,\n            isFunction = kendo.isFunction;\n\n        if (selectHandler && isFunction(selectHandler)) {\n            return selectHandler;\n        }\n        return null;\n    }\n\n    function popupOpenerSelector(id) {\n        return id ? \"li[data-groupparent='\" + id + \"']\" : \"li[data-groupparent]\";\n    }\n    function popupGroupSelector(id) {\n        var selector = id ? \"[data-group='\" + id + \"']\" : \"[data-group]\";\n        return \"ul\" + selector + \",div\" + selector;\n    }\n    function getChildPopups(currentPopup, overflowWrapper) {\n        var childPopupOpener = currentPopup.find(popupOpenerSelector());\n        var result = [];\n        childPopupOpener.each(function(i, opener) {\n            opener = $(opener);\n            var popupId = opener.data(POPUP_OPENER_ATTR);\n            var popup = currentPopup;\n            while (popupId) {\n                popup = overflowWrapper.find(popupGroupSelector(popupId) + \":visible\");\n                if (popup.length) {\n                    result.push(popup);\n                }\n                opener = popup.find(popupOpenerSelector());\n                popupId = opener.data(POPUP_OPENER_ATTR);\n            }\n        });\n\n        return result;\n    }\n\n    function popupParentItem(popupElement, overflowWrapper) {\n        var popupId = popupElement.data(POPUP_ID_ATTR);\n        return popupId ? overflowWrapper.find(popupOpenerSelector(popupId)) : $([]);\n    }\n\n    function itemPopup(item, overflowWrapper) {\n        var popupId = item.data(POPUP_OPENER_ATTR);\n        return popupId ? overflowWrapper.children(animationContainerSelector).children(popupGroupSelector(popupId)) : $([]);\n    }\n\n    function overflowMenuParents(current, overflowWrapper) {\n        var parents = [];\n        var getParents = function(item) {\n            while (item.parentNode && !overflowWrapper.is(item.parentNode)) {\n                parents.push(item.parentNode);\n                item = item.parentNode;\n            }\n        };\n        var elem = current[0] || current;\n        getParents(elem);\n        var last = parents[parents.length - 1];\n        while ($(last).is(animationContainerSelector)) {\n            var popupElement = $(last).children(\"ul\");\n            elem = popupParentItem(popupElement, overflowWrapper)[0];\n            if (!elem) {\n                break;\n            }\n            parents.push(elem);\n            getParents(elem);\n            last = parents[parents.length - 1];\n        }\n        return parents;\n    }\n\n    function mousewheelDelta(e) {\n        var delta = 0;\n\n        if (e.wheelDelta) {\n            delta = -e.wheelDelta / 120;\n            delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n        }\n\n        if (e.detail) {\n            delta = Math.round(e.detail / 3);\n        }\n\n        return delta;\n    }\n\n    function parentsScroll(current, scrollDirection) {\n        var scroll = 0;\n        var parent = current.parentNode;\n        while (parent && !isNaN(parent[scrollDirection])) {\n            scroll += parent[scrollDirection];\n            parent = parent.parentNode;\n        }\n        return scroll;\n    }\n\n    function isPointerTouch(e) {\n        return allPointers && e.originalEvent && e.originalEvent.pointerType in touchPointerTypes;\n    }\n\n    function isTouch(e) {\n        var ev = e.originalEvent;\n        return touch && /touch/i.test(ev.type || \"\");\n    }\n\n    function removeSpacesBetweenItems(ul) {\n        ul.contents().filter(function() { return this.nodeName != \"LI\"; }).remove();\n    }\n\n    var Menu = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.wrapper = that.element;\n            options = that.options;\n            that._accessors();\n            that._templates();\n            that._dataSource();\n\n            that._updateClasses();\n\n            that._animations(options);\n\n            that.nextItemZIndex = 100;\n\n            that._tabindex();\n\n            that._initOverflow(options);\n\n            that._attachMenuEventsHandlers();\n\n            if (options.openOnClick) {\n                that.clicked = false;\n            }\n\n            element.attr(ROLE, \"menubar\");\n\n            if (element[0].id) {\n                that._ariaId = kendo.format(\"{0}_mn_active\", element[0].id);\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            OPEN,\n            CLOSE,\n            ACTIVATE,\n            DEACTIVATE,\n            SELECT,\n            DATABOUND\n        ],\n\n        options: {\n            name: \"Menu\",\n            animation: {\n                open: {\n                    duration: 200\n                },\n                close: { // if close animation effects are defined, they will be used instead of open.reverse\n                    duration: 100\n                }\n            },\n            orientation: \"horizontal\",\n            direction: \"default\",\n            openOnClick: false,\n            closeOnClick: true,\n            hoverDelay: 100,\n            scrollable: false,\n            popupCollision: undefined$1\n        },\n\n        _initData: function() {\n            var that = this;\n\n            if (that.dataSource) {\n                that.angular(\"cleanup\", function() {\n                    return {\n                        elements: that.element.children()\n                    };\n                });\n                that.element.empty();\n\n                that.append(that.dataSource.view(), that.element);\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: that.element.children()\n                    };\n                });\n            }\n        },\n\n        _attachMenuEventsHandlers: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var overflowWrapper = that._overflowWrapper();\n\n            that._checkActiveProxy = that._checkActiveElement.bind(that);\n\n            (overflowWrapper || element).on(POINTERDOWN, itemSelector, that._focusHandler.bind(that))\n                   .on(CLICK + NS, disabledSelector, false)\n                   .on(CLICK + NS, itemSelector, that._click.bind(that))\n                   .on(POINTERDOWN + \" \" + MOUSEDOWN + NS, \".k-content\", that._preventClose.bind(that))\n                   .on(MOUSEENTER + NS, availableItemsSelector, that._mouseenter.bind(that))\n                   .on(MOUSELEAVE + NS, availableItemsSelector, that._mouseleave.bind(that))\n                   .on(MOUSEDOWN + NS, availableItemsSelector, that._mousedown.bind(that))\n                   .on(TOUCHSTART + NS + \" \" + MOUSEENTER + NS + \" \" + MOUSELEAVE + NS + \" \" +\n                       MOUSEDOWN + NS + \" \" + CLICK + NS, linkSelector, that._toggleHover.bind(that));\n\n            element.on(\"keydown\" + NS, that._keydown.bind(that))\n                   .on(\"focus\" + NS, that._focus.bind(that))\n                   .on(\"focus\" + NS, \".k-content\", that._focus.bind(that))\n                   .on(\"blur\" + NS, that._removeHoverItem.bind(that))\n                   .on(\"blur\" + NS, \"[tabindex]\", that._checkActiveProxy);\n\n            if (overflowWrapper) {\n                overflowWrapper\n                    .on(MOUSELEAVE + NS, popupSelector, that._mouseleavePopup.bind(that))\n                    .on(MOUSEENTER + NS, popupSelector, that._mouseenterPopup.bind(that));\n            }\n\n            if (options.openOnClick) {\n                that._documentClickHandler = that._documentClick.bind(that);\n                $(document).on(\"click\", that._documentClickHandler);\n            }\n        },\n\n        _detachMenuEventsHandlers: function() {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n\n            if (overflowWrapper) {\n                overflowWrapper.off(NS);\n            }\n\n            that.element.off(NS);\n\n            if (that._documentClickHandler) {\n                $(document).off(\"click\", that._documentClickHandler);\n            }\n        },\n\n        _initOverflow: function(options) {\n            var that = this;\n            var isHorizontal = options.orientation == \"horizontal\";\n            var backwardBtn, forwardBtn;\n\n            if (options.scrollable) {\n                that._openedPopups = {};\n                that._scrollWrapper = that.element.wrap(\"<div class='k-menu-scroll-wrapper k-\" + options.orientation + \"'></div>\").parent();\n                if (isHorizontal) {\n                    removeSpacesBetweenItems(that.element);\n                }\n\n                backwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"left\" : \"up\" }));\n                forwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"right\" : \"down\" }));\n                backwardBtn.add(forwardBtn).appendTo(that._scrollWrapper);\n\n                that._initScrolling(that.element, backwardBtn, forwardBtn, isHorizontal);\n\n                var initialWidth = that.element.outerWidth();\n                var initialCssWidth = that.element[0].style.width;\n                initialCssWidth = initialCssWidth === \"auto\" ? \"\" : initialCssWidth;\n\n                if (isHorizontal) {\n                    $(window).on(RESIZE, function() {\n                        setTimeout(function() {\n                            that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                            that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                        }, 300);\n                    });\n                }\n\n                that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n            }\n        },\n\n        _overflowWrapper: function() {\n            return this._scrollWrapper || this._popupsWrapper;\n        },\n\n        _setOverflowWrapperWidth: function(initialWidth, initialCssWidth) {\n            var that = this;\n            var wrapperCssWidth = that._scrollWrapper.css(\"width\");\n\n            that._scrollWrapper.css({ width: \"\" });\n            var wrapperWidth = that._scrollWrapper.outerWidth();\n            that._scrollWrapper.css({ width: wrapperCssWidth });\n\n            var menuWidth = that.element.outerWidth();\n            var borders = that.element[0].offsetWidth - that.element[0].clientWidth;\n\n            if (menuWidth != wrapperWidth && wrapperWidth > 0) {\n                var width = initialCssWidth ? Math.min(initialWidth, wrapperWidth) : wrapperWidth;\n                that.element.width(width - borders);\n                that._scrollWrapper.width(width);\n            }\n        },\n\n        _reinitOverflow: function(options) {\n            var that = this;\n            var overflowChanged = ((options.scrollable && !that.options.scrollable) || (!options.scrollable && that.options.scrollable)) ||\n                (options.scrollable && that.options.scrollable && options.scrollable.distance != that.options.scrollable.distance) ||\n                options.orientation != that.options.orientation;\n\n            if (overflowChanged) {\n                that._detachMenuEventsHandlers();\n                that._destroyOverflow();\n                that._initOverflow(options);\n                that._attachMenuEventsHandlers();\n            }\n        },\n\n        _destroyOverflow: function() {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n            if (overflowWrapper) {\n                overflowWrapper.off(NS);\n                overflowWrapper.find(scrollButtonSelector).off(NS).remove();\n                overflowWrapper.children(animationContainerSelector).each(function(i, popupWrapper) {\n                    var ul = $(popupWrapper).children(groupSelector);\n                    ul.off(MOUSEWHEEL);\n                    var popupParentLi = popupParentItem(ul, overflowWrapper);\n                    if (popupParentLi.length) {\n                        popupParentLi.append(popupWrapper);\n                    }\n                });\n\n                overflowWrapper.find(popupOpenerSelector()).removeAttr(\"data-groupparent\");\n                overflowWrapper.find(popupGroupSelector()).removeAttr(\"data-group\");\n                that.element.off(MOUSEWHEEL);\n                $(window).off(RESIZE);\n                overflowWrapper.contents().unwrap();\n\n                that._scrollWrapper = that._popupsWrapper = that._openedPopups = undefined$1;\n            }\n        },\n\n        _initScrolling: function(scrollElement, backwardBtn, forwardBtn, isHorizontal) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var distance = that.isNumeric(scrollable.distance) ? scrollable.distance : SCROLLSPEED;\n            var mouseWheelDistance = distance / 2;\n            var backward = \"-=\" + distance;\n            var forward = \"+=\" + distance;\n            var backwardDouble = \"-=\" + distance * 2;\n            var forwardDouble = \"+=\" + distance * 2;\n            var scrolling = false;\n            var touchEvents = false;\n\n            var scroll = function(value) {\n                var scrollValue = isHorizontal ? { \"scrollLeft\": value } : { \"scrollTop\": value };\n                scrollElement.finish().animate(scrollValue, \"fast\", \"linear\", function() {\n                    if (scrolling) {\n                        scroll(value);\n                    }\n                });\n                that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n            };\n\n            var mouseenterHandler = function(e) {\n                if (!scrolling && !touchEvents) {\n                    scroll(e.data.direction);\n                    scrolling = true;\n                }\n            };\n\n            var mousedownHandler = function(e) {\n                var scrollValue = isHorizontal ? { \"scrollLeft\": e.data.direction } : { \"scrollTop\": e.data.direction };\n                touchEvents = isTouch(e) || isPointerTouch(e);\n                scrollElement.stop().animate(scrollValue, \"fast\", \"linear\", function() {\n                    if (!touchEvents) {\n                        $(e.currentTarget).trigger(MOUSEENTER);\n                    } else {\n                         that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                         scrolling = true;\n                    }\n                });\n                scrolling = false;\n\n                e.stopPropagation();\n                e.preventDefault();\n            };\n\n            backwardBtn.on(MOUSEENTER + NS, { direction: backward }, mouseenterHandler)\n                .on(kendo.eventMap.down + NS, { direction: backwardDouble }, mousedownHandler);\n\n            forwardBtn.on(MOUSEENTER + NS, { direction: forward }, mouseenterHandler)\n                .on(kendo.eventMap.down + NS, { direction: forwardDouble }, mousedownHandler);\n\n            backwardBtn.add(forwardBtn)\n                .on(MOUSELEAVE + NS, function() {\n                    scrollElement.stop();\n                    scrolling = false;\n                    that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                });\n\n            scrollElement.on(MOUSEWHEEL, function(e) {\n                if (!e.ctrlKey && !e.shiftKey && !e.altKey) {\n                    var wheelDelta = mousewheelDelta(e.originalEvent);\n                    var scrollSpeed = Math.abs(wheelDelta) * mouseWheelDistance;\n                    var value = (wheelDelta > 0 ? \"+=\" : \"-=\") + scrollSpeed;\n                    var scrollValue = isHorizontal ? { \"scrollLeft\": value } : { \"scrollTop\": value };\n\n                    that._closeChildPopups(scrollElement);\n\n                    scrollElement.finish().animate(scrollValue, \"fast\", \"linear\", function() {\n                        that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                    });\n                    e.preventDefault();\n                }\n            });\n        },\n\n        isNumeric: function(n) {\n            return !isNaN(parseFloat(n)) && isFinite(n);\n        },\n\n        _toggleScrollButtons: function(scrollElement, backwardBtn, forwardBtn, horizontal) {\n            var currentScroll = horizontal ? kendo.scrollLeft(scrollElement) : scrollElement.scrollTop();\n            var scrollSize = horizontal ? SCROLLWIDTH : SCROLLHEIGHT;\n            var offset = horizontal ? OFFSETWIDTH : OFFSETHEIGHT;\n\n            backwardBtn.toggle(currentScroll !== 0);\n            forwardBtn.toggle(currentScroll < scrollElement[0][scrollSize] - scrollElement[0][offset] - 1);\n        },\n\n        setOptions: function(options) {\n            var animation = this.options.animation;\n\n            this._animations(options);\n\n            options.animation = extend(true, animation, options.animation);\n\n            if (\"dataSource\" in options) {\n                this._dataSource(options);\n            }\n\n            this._updateClasses();\n            this._reinitOverflow(options);\n\n            Widget.fn.setOptions.call(this, options);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that._detachMenuEventsHandlers();\n\n            that._destroyOverflow();\n\n            kendo.destroy(that.element);\n        },\n\n        enable: function(element, enable) {\n            this._toggleDisabled(element, enable !== false);\n\n            return this;\n        },\n\n        disable: function(element) {\n            this._toggleDisabled(element, false);\n\n            return this;\n        },\n\n        attemptGetItem: function(candidate) {\n            candidate = candidate || this.element;\n            var item = this.element.find(candidate);\n            var overflowWrapper = this._overflowWrapper();\n\n            if (item.length || candidate === this.element) {\n                return item;\n            } else if (overflowWrapper) {\n                return overflowWrapper.find(candidate);\n            } else {\n                return $();\n            }\n        },\n\n        append: function(item, referenceItem) {\n            referenceItem = this.attemptGetItem(referenceItem);\n\n            var inserted = this._insert(item, referenceItem, referenceItem.length ? this._childPopupElement(referenceItem) : null);\n\n            each(inserted.items, function(i) {\n                inserted.group.append(this);\n                updateArrow(this);\n                storeItemSelectEventHandler(this, item[i] || item);\n            });\n\n            updateArrow(referenceItem);\n            updateFirstLast(inserted.group.find(\".k-first, .k-last\").add(inserted.items));\n            updateHasAriaPopup(getParentLiItems(inserted.group));\n\n            return this;\n        },\n\n        insertBefore: function(item, referenceItem) {\n            referenceItem = this.attemptGetItem(referenceItem);\n\n            var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n            each(inserted.items, function(i) {\n                referenceItem.before(this);\n                updateArrow(this);\n                updateFirstLast(this);\n                storeItemSelectEventHandler(this, item[i] || item);\n            });\n\n            updateFirstLast(referenceItem);\n\n            return this;\n        },\n\n        insertAfter: function(item, referenceItem) {\n            referenceItem = this.attemptGetItem(referenceItem);\n\n            var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n            each(inserted.items, function(i) {\n                referenceItem.after(this);\n                updateArrow(this);\n                updateFirstLast(this);\n                storeItemSelectEventHandler(this, item[i] || item);\n            });\n\n            updateFirstLast(referenceItem);\n\n            return this;\n        },\n\n        _insert: function(item, referenceItem, parent) {\n            var that = this,\n                items, groups;\n\n            if (!referenceItem || !referenceItem.length) {\n                parent = that.element;\n            }\n\n            var plain = $.isPlainObject(item) || item instanceof kendo.data.ObservableObject,\n                groupData = {\n                    firstLevel: parent.hasClass(MENU),\n                    horizontal: parent.hasClass(MENU + \"-horizontal\"),\n                    expanded: true,\n                    length: parent.children().length\n                };\n\n            if (referenceItem && !parent.length) {\n                parent = $(that.renderGroup({ group: groupData, options: that.options })).css(\"display\", \"none\").appendTo(referenceItem);\n            }\n\n            if (plain || isArray(item) || item instanceof kendo.data.ObservableArray) { // is JSON\n                items = $($.map(plain ? [ item ] : item, function(value, idx) {\n                            if (typeof value === \"string\") {\n                                return $(value).get();\n                            } else {\n                                return $(that.renderItem({\n                                    group: groupData,\n                                    item: extend(value, { index: idx })\n                                })).get();\n                            }\n                        }));\n            } else {\n                if (typeof item == \"string\" && item.charAt(0) != \"<\") {\n                    items = that.element.find(item);\n                } else {\n                    items = $(item);\n                }\n\n                groups = items.find(\"> ul\")\n                                .addClass(\"k-menu-group k-menu-group-md\")\n                                .attr(ROLE, \"menu\");\n\n                items = items.filter(\"li\");\n\n                items.add(groups.find(\"> li\")).each(function() {\n                    updateItemClasses(this);\n                });\n            }\n\n            return { items: items, group: parent };\n        },\n\n        remove: function(element) {\n            element = this.attemptGetItem(element);\n\n            var that = this,\n                parent = element.parentsUntil(that.element, allItemsSelector),\n                group = element.parent(\"ul:not(.k-menu)\");\n\n            element.remove();\n\n            if (group && !group.children(allItemsSelector).length) {\n                var parentItems = getParentLiItems(group);\n\n                var container = group.parent(animationContainerSelector);\n\n                if (container.length) {\n                    container.remove();\n                } else {\n                    group.remove();\n                }\n\n                updateHasAriaPopup(parentItems);\n            }\n\n            if (parent.length) {\n                parent = parent.eq(0);\n\n                updateArrow(parent);\n                updateFirstLast(parent);\n            }\n\n            return that;\n        },\n\n        _openAfterLoad: function(element, dataItem) {\n            var that = this;\n            if (dataItem.loaded()) {\n                that.open(element);\n                that._loading = false;\n            } else {\n                dataItem.one(CHANGE, function() {\n                    element.find(ICON_SELECTOR).removeClass(\"k-i-loading\");\n                    if (that._loading) {\n                        that.open(element);\n                        that._loading = false;\n                    }\n                });\n            }\n        },\n\n        open: function(element) {\n            var that = this;\n            var options = that.options;\n            var horizontal = options.orientation == \"horizontal\";\n            var direction = options.direction;\n            var isRtl = kendo.support.isRtl(that.wrapper);\n            var overflowWrapper = that._overflowWrapper();\n            element = (overflowWrapper || that.element).find(element);\n\n            var dataItem = that.dataSource && that.dataSource.getByUid(element.data(kendo.ns + \"uid\"));\n\n            if (dataItem && dataItem.hasChildren && !dataItem.loaded() && !that._loading) {\n                that._loading = true;\n                element.find(ICON_SELECTOR).addClass(\"k-i-loading\");\n                dataItem.load();\n                that._openAfterLoad(element, dataItem);\n                return;\n            }\n\n            if (/^(top|bottom|default)$/.test(direction)) {\n                if (isRtl) {\n                    direction = horizontal ? (direction + \" left\").replace(\"default\", \"bottom\") : \"left\";\n                } else {\n                    direction = horizontal ? (direction + \" right\").replace(\"default\", \"bottom\") : \"right\";\n                }\n            }\n\n            var visiblePopups = \">.k-popup:visible,>.k-animation-container>.k-popup:visible\";\n            var closePopup = function() {\n                var popup = $(this).data(KENDOPOPUP);\n                if (popup) {\n                    // Use the built-in close method to play the hoverDelay from the options\n                    that.close($(this).closest(\"li.k-item\"), true);\n                }\n            };\n\n            element.siblings()\n                   .find(visiblePopups)\n                   .each(closePopup);\n\n            if (overflowWrapper) {\n                element.find(visiblePopups).each(closePopup);\n            }\n\n            if (that.options.openOnClick) {\n                that.clicked = true;\n            }\n\n            element.each(function() {\n                var li = $(this);\n\n                clearTimeout(li.data(TIMER));\n\n                li.data(TIMER, setTimeout(function() {\n                    var ul = li.find(\"> .k-menu-group, > .k-animation-container > .k-menu-group\").filter(\":hidden\").first();\n                    var popup;\n                    var overflowPopup;\n\n                    if (!ul[0] && overflowWrapper) {\n                        overflowPopup = that._getPopup(li);\n                        ul = overflowPopup && overflowPopup.element;\n                    }\n                    if (ul.is(\":visible\")) {\n                        return;\n                    }\n\n                    if (ul[0] && that._triggerEvent({ item: li[0], type: OPEN }) === false) {\n\n                        if (!ul.find(\".k-menu-group\")[0] && ul.children(\".k-item\").length > 1) {\n                            var windowHeight = $(window).height(),\n                                setScrolling = function() {\n                                    ul.css({ maxHeight: windowHeight - (kendo._outerHeight(ul) - ul.height()) - kendo.getShadows(ul).bottom, overflow: \"auto\" });\n                                };\n\n                            setScrolling();\n                        } else {\n                            ul.css({ maxHeight: \"\", overflow: \"\" });\n                        }\n\n                        li.data(ZINDEX, li.css(ZINDEX));\n                        var nextZindex = that.nextItemZIndex++;\n                        li.css(ZINDEX, nextZindex);\n\n                        if (that.options.scrollable) {\n                            li.parent().siblings(scrollButtonSelector).css({ zIndex: ++nextZindex });\n                        }\n\n                        popup = ul.data(KENDOPOPUP);\n                        var root = li.parent().hasClass(MENU),\n                            parentHorizontal = root && horizontal,\n                            directions = parseDirection(direction, root, isRtl),\n                            effects = options.animation.open.effects,\n                            openEffects = effects !== undefined$1 ? effects : \"slideIn:\" + getEffectDirection(direction, root);\n\n                        if (!popup) {\n                            popup = ul.kendoPopup({\n                                activate: function() { that._triggerEvent({ item: this.wrapper.parent(), type: ACTIVATE }); },\n                                deactivate: function(e) {\n                                    that._closing = false;\n                                    e.sender.element // Restore opacity after fade.\n                                        .removeData(\"targetTransform\")\n                                        .css({ opacity: \"\" });\n                                    that._triggerEvent({ item: this.wrapper.parent(), type: DEACTIVATE });\n                                },\n                                origin: directions.origin,\n                                position: directions.position,\n                                collision: options.popupCollision !== undefined$1 ? options.popupCollision : (parentHorizontal ? \"fit\" : \"fit flip\"),\n                                anchor: li,\n                                appendTo: overflowWrapper || li,\n                                animation: {\n                                    open: extend(true, { effects: openEffects }, options.animation.open),\n                                    close: options.animation.close\n                                },\n                                open: that._popupOpen.bind(that),\n                                close: function(e) {\n                                    that._closing = e.sender.element;\n                                    var li = e.sender.wrapper.parent();\n\n                                    if (overflowWrapper) {\n                                        var popupId = e.sender.element.data(POPUP_ID_ATTR);\n                                        if (popupId) {\n                                            li = (overflowWrapper || that.element).find(popupOpenerSelector(popupId));\n                                        }\n                                        e.sender.wrapper.children(scrollButtonSelector).hide();\n                                    }\n\n                                    if (!that._triggerEvent({ item: li[0], type: CLOSE })) {\n                                        li.css(ZINDEX, li.data(ZINDEX));\n                                        li.removeData(ZINDEX);\n\n                                        if (that.options.scrollable) {\n                                            li.parent().siblings(scrollButtonSelector).css({ zIndex: \"\" });\n                                        }\n\n                                        if (touch || allPointers || kendo.support.mouseAndTouchPresent) {\n                                            li.removeClass(HOVERSTATE);\n                                            that._removeHoverItem();\n                                        }\n                                    } else {\n                                        e.preventDefault();\n                                    }\n                                }\n                            }).data(KENDOPOPUP);\n\n                            ul.closest(animationContainerSelector).removeAttr(ROLE);\n                        } else {\n                            popup = ul.data(KENDOPOPUP);\n                            popup.options.origin = directions.origin;\n                            popup.options.position = directions.position;\n                            popup.options.animation.open.effects = openEffects;\n                        }\n                        ul.removeAttr(\"aria-hidden\");\n                        li.attr(ARIA_EXPANDED, true);\n\n                        that._configurePopupOverflow(popup, li);\n\n                        popup._hovered = true;\n                        popup.open();\n\n                        that._initPopupScrolling(popup);\n                    }\n\n                }, that.options.hoverDelay));\n            });\n\n            return that;\n        },\n\n        _configurePopupOverflow: function(popup, popupOpener) {\n            var that = this;\n           if (that.options.scrollable) {\n                that._wrapPopupElement(popup);\n                if (!popupOpener.attr(\"data-groupparent\")) {\n                    var groupId = new Date().getTime();\n                    popupOpener.attr(\"data-groupparent\", groupId);\n                    popup.element.attr(\"data-group\", groupId);\n                }\n           }\n        },\n\n        _wrapPopupElement: function(popup) {\n            if (!popup.element.parent().is(animationContainerSelector)) {\n                popup.wrapper = kendo.wrap(popup.element, popup.options.autosize)\n                    .css({\n                        overflow: \"hidden\",\n                        display: \"block\",\n                        position: \"absolute\"\n                    });\n            }\n        },\n\n        _initPopupScrolling: function(popup, isHorizontal, skipMouseEvents) {\n            var that = this;\n\n            if (that.options.scrollable && popup.element[0].scrollHeight > popup.element[0].offsetHeight) {\n                that._initPopupScrollButtons(popup, isHorizontal, skipMouseEvents);\n            }\n        },\n\n        _initPopupScrollButtons: function(popup, isHorizontal, skipMouseEvents) {\n            var that = this;\n            var scrollButtons = popup.wrapper.children(scrollButtonSelector);\n            var animation = that.options.animation;\n            var timeout = ((animation && animation.open && animation.open.duration) || 0) + DELAY;\n            setTimeout(function() {\n                if (!scrollButtons.length) {\n                    var backwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"left\" : \"up\" }));\n                    var forwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"right\" : \"down\" }));\n\n                    scrollButtons = backwardBtn.add(forwardBtn).appendTo(popup.wrapper);\n\n                    that._initScrolling(popup.element, backwardBtn, forwardBtn, isHorizontal);\n                    if (!skipMouseEvents) {\n                        scrollButtons.on(MOUSEENTER + NS, function() {\n                            var overflowWrapper = that._overflowWrapper();\n                            $(getChildPopups(popup.element, overflowWrapper)).each(function(i, p) {\n                                var popupOpener = overflowWrapper.find(popupOpenerSelector(p.data(POPUP_ID_ATTR)));\n                                that.close(popupOpener);\n                            });\n                        })\n                        .on(MOUSELEAVE + NS, function() {\n                            setTimeout(function() {\n                                if ($.isEmptyObject(that._openedPopups)) {\n                                    that._closeParentPopups(popup.element);\n                                }\n                            }, DELAY);\n                        });\n                    }\n                }\n                that._toggleScrollButtons(popup.element, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n            }, timeout);\n        },\n\n        _popupOpen: function(e) {\n            if (!this._keyTriggered) {\n                e.sender.element.children(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n            if (this.options.scrollable) {\n                this._setPopupHeight(e.sender);\n            }\n        },\n\n        _setPopupHeight: function(popup, isFixed) {\n            var popupElement = popup.element;\n            var popups = popupElement.add(popupElement.parent(animationContainerSelector));\n\n            popups.height((popupElement.hasClass(MENU) && this._initialHeight) || \"\");\n\n            var location = popup._location(isFixed);\n            var windowHeight = $(window).height();\n            var popupOuterHeight = location.height;\n            var popupOffsetTop = isFixed ? 0 : Math.max(location.top, 0);\n            var scrollTop = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], \"scrollTop\");\n            var bottomScrollbar = window.innerHeight - windowHeight;\n            var maxHeight = windowHeight - kendo.getShadows(popupElement).bottom + bottomScrollbar;\n            var canFit = maxHeight + scrollTop > popupOuterHeight + popupOffsetTop;\n\n            if (!canFit) {\n                var height = Math.min(maxHeight, maxHeight - popupOffsetTop + scrollTop);\n                popups.css({ overflow: \"hidden\", height: height + \"px\" });\n            }\n        },\n\n        close: function(items, dontClearClose) {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n            var element = (overflowWrapper || that.element);\n\n            items = element.find(items);\n\n            if (!items.length) {\n                items = element.find(\">.k-item\");\n            }\n\n            var hasChildPopupsHovered = function(currentPopup) {\n                var result = false;\n                if ($.isEmptyObject(that._openedPopups)) {\n                    return result;\n                }\n                $(getChildPopups(currentPopup, overflowWrapper)).each(function(i, popup) {\n                    result = !!that._openedPopups[popup.data(POPUP_ID_ATTR).toString()];\n                    return !result;\n                });\n                return result;\n            };\n\n            var isPopupMouseLeaved = function(opener) {\n                var groupId = opener.data(POPUP_OPENER_ATTR);\n                return (!overflowWrapper || !groupId || !that._openedPopups[groupId.toString()]);\n            };\n\n            items.each(function() {\n                var li = $(this);\n\n                li.attr(ARIA_EXPANDED, false);\n\n                if (!dontClearClose && that._isRootItem(li)) {\n                    that.clicked = false;\n                }\n\n                clearTimeout(li.data(TIMER));\n\n                li.data(TIMER, setTimeout(function() {\n                    var popup = that._getPopup(li);\n                    if (popup && (isPopupMouseLeaved(li) || that._forceClose)) {\n                        if (!that._forceClose && hasChildPopupsHovered(popup.element)) {\n                            return;\n                        }\n\n                        popup.close();\n                        popup.element.attr(\"aria-hidden\", true);\n\n                        if (overflowWrapper) {\n                            if (that._forceClose && items.last().is(li[0])) {\n                                delete that._forceClose;\n                            }\n                        }\n                    }\n                }, that.options.hoverDelay));\n            });\n\n            return that;\n        },\n\n        _getPopup: function(li) {\n            var that = this;\n            var popup = li.find(\".k-menu-group:not(.k-list-container):not(.k-calendar-container):visible\").first().data(KENDOPOPUP);\n            var overflowWrapper = that._overflowWrapper();\n\n            if (!popup && overflowWrapper) {\n                var groupId = li.data(POPUP_OPENER_ATTR);\n                if (groupId) {\n                    var popupElement = overflowWrapper.find(popupGroupSelector(groupId));\n                    popup = popupElement.data(KENDOPOPUP);\n                }\n            }\n            return popup;\n        },\n\n        _toggleDisabled: function(items, enable) {\n            this.element.find(items).each(function() {\n                $(this)\n                    .toggleClass(DISABLEDSTATE, !enable)\n                    .attr(\"aria-disabled\", !enable);\n            });\n        },\n\n        _toggleHover: function(e) {\n            var target = $(kendo.eventTarget(e) || e.target).closest(allItemsSelector),\n                isEnter = e.type == MOUSEENTER || MOUSEDOWN.indexOf(e.type) !== -1;\n\n            target.siblings().removeClass(HOVERSTATE);\n\n            if (!target.parents(\"li.\" + DISABLEDSTATE).length) {\n                target.toggleClass(HOVERSTATE, isEnter || e.type == \"mousedown\" || e.type == \"pointerover\" || e.type == TOUCHSTART);\n            }\n\n            this._removeHoverItem();\n        },\n\n        _preventClose: function() {\n            if (!this.options.closeOnClick) {\n                this._closurePrevented = true;\n            }\n        },\n\n        _checkActiveElement: function(e) {\n            var that = this,\n                hoverItem = $(e ? e.currentTarget : this._hoverItem()),\n                target = that._findRootParent(hoverItem)[0];\n\n            if (!this._closurePrevented) {\n                setTimeout(function() {\n                    if (!document.hasFocus() || (!contains(target, kendo._activeElement()) && e && !contains(target, e.currentTarget))) {\n                        that.close(target);\n                    }\n                }, 0);\n            }\n\n            this._closurePrevented = false;\n        },\n\n        _removeHoverItem: function() {\n            var oldHoverItem = this._hoverItem();\n\n            if (oldHoverItem && oldHoverItem.hasClass(FOCUSEDSTATE)) {\n                oldHoverItem.removeClass(FOCUSEDSTATE);\n                this._oldHoverItem = null;\n            }\n        },\n\n        _updateClasses: function() {\n            var element = this.element,\n                nonContentGroupsSelector = \".k-menu-init div ul\",\n                items;\n\n            element.removeClass(\"k-menu-horizontal k-menu-vertical\");\n            element.addClass(\"k-widget k-reset k-menu-init \" + MENU).addClass(MENU + \"-\" + this.options.orientation);\n\n            if (this.options.orientation === \"vertical\") {\n                element.attr(\"aria-orientation\", \"vertical\");\n            } else {\n                element.attr(\"aria-orientation\", \"horizontal\");\n            }\n\n            element.find(\"li > ul\")\n                   .filter(function() {\n                       return !kendo.support.matchesSelector.call(this, nonContentGroupsSelector);\n                   })\n                   .addClass(\"k-group k-menu-group k-menu-group-md\")\n                   .attr(ROLE, \"menu\")\n                   .hide()\n                   .attr(\"aria-hidden\", element.is(\":visible\"))\n                   .parent(\"li\")\n                   .attr(\"aria-haspopup\", \"true\")\n                   .end()\n                   .find(\"li > div\")\n                   .addClass(\"k-content\")\n                   .attr(\"tabindex\", \"-1\"); // Capture the focus before the Menu\n\n            element.find(\"li[aria-haspopup]\").attr(ARIA_EXPANDED, false);\n\n            items = element.find(\"> li,.k-menu-group > li\");\n\n            element.removeClass(\"k-menu-init\");\n\n            items.each(function() {\n                updateItemClasses(this);\n            });\n        },\n\n        _mouseenter: function(e) {\n            var that = this;\n            var element = $(e.currentTarget);\n            var hasChildren = that._itemHasChildren(element);\n            var popupId = element.data(POPUP_OPENER_ATTR) || element.parent().data(POPUP_ID_ATTR);\n            var pointerTouch = isPointerTouch(e);\n            var isParentClosing = false;\n\n            if (popupId) {\n                that._openedPopups[popupId.toString()] = true;\n            }\n\n            if (that._closing) {\n                isParentClosing = !!that._closing.find(element).length;\n            }\n\n            if (isParentClosing || (e.delegateTarget != element.parents(menuSelector)[0] && e.delegateTarget != element.parents(\".k-menu-scroll-wrapper,.k-popups-wrapper\")[0])) {\n                return;\n            }\n\n            that._keyTriggered = false;\n\n            if ((that.options.openOnClick.rootMenuItems && that._isRootItem(element.closest(allItemsSelector))) ||\n                (that.options.openOnClick.subMenuItems && !that._isRootItem(element.closest(allItemsSelector)))) {\n                return;\n            }\n\n            if ((that.options.openOnClick === false ||\n                (that.options.openOnClick.rootMenuItems === false && that._isRootItem(element.closest(allItemsSelector))) ||\n                (that.options.openOnClick.subMenuItems === false && !that._isRootItem(element.closest(allItemsSelector))) || that.clicked) && !touch &&\n                !(pointerTouch && that._isRootItem(element.closest(allItemsSelector)))) {\n\n                if (!contains(e.currentTarget, e.relatedTarget) && hasChildren) {\n                    that.open(element);\n                }\n            }\n\n            if (that.options.openOnClick === true && that.clicked || touch) {\n                element.siblings().each(function(_, sibling) {\n                    that.close(sibling, true);\n                });\n            }\n        },\n\n        _mousedown: function(e) {\n            var that = this;\n            var element = $(e.currentTarget);\n            // needs to close subMenuItems\n            if (that.options.openOnClick.subMenuItems && !that._isRootItem(element) || touch) {\n                element.siblings().each(function(_, sibling) {\n                    that.close(sibling, true);\n                });\n            }\n        },\n\n        _mouseleave: function(e) {\n            var that = this;\n            var element = $(e.currentTarget);\n            var popupOpener = element.data(POPUP_OPENER_ATTR);\n            var hasChildren = (element.children(animationContainerSelector).length || element.children(groupSelector).length) || popupOpener;\n            var $window = $(window);\n\n            if (popupOpener) {\n                delete that._openedPopups[popupOpener.toString()];\n            }\n\n            if (element.parentsUntil(animationContainerSelector, \".k-list-container,.k-calendar-container\")[0]) {\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            if ((that.options.openOnClick === false || (!that.options.openOnClick.rootMenuItems && that._isRootItem(element)) ||\n                (!that.options.openOnClick.subMenuItems && !that._isRootItem(element))) && !touch && !isPointerTouch(e) &&\n                !contains(e.currentTarget, e.relatedTarget || e.target) && hasChildren &&\n                !contains(e.currentTarget, kendo._activeElement())) {\n                    that.close(element, true);\n                    that._loading = false;\n                    return;\n            }\n\n            // Detect if cursor goes outside the viewport of the browser\n            if ( (kendo.support.browser.msie && !e.toElement && !e.relatedTarget && !isPointerTouch(e)) ||\n                e.clientX < 0 || e.clientY < 0 ||\n                e.clientY > $window.height() ||\n                e.clientX > $window.width()) {\n                that.close(element);\n            }\n        },\n\n        _mouseenterPopup: function(e) {\n            var that = this;\n            var popupElement = $(e.currentTarget);\n\n            if (popupElement.parent().is(animationContainerSelector)) {\n                 return;\n            }\n\n            popupElement = popupElement.children(\"ul\");\n            var popupId = popupElement.data(POPUP_ID_ATTR);\n\n            if (popupId) {\n                that._openedPopups[popupId.toString()] = true;\n            }\n        },\n\n        _mouseleavePopup: function(e) {\n            var that = this;\n            var popupElement = $(e.currentTarget);\n\n            if (!isPointerTouch(e) && popupElement.is(animationContainerSelector)) {\n                that._closePopups(popupElement.children(\"ul\"));\n            }\n        },\n\n        _closePopups: function(rootPopup) {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n            var popupId = rootPopup.data(POPUP_ID_ATTR);\n\n            if (popupId) {\n                delete that._openedPopups[popupId.toString()];\n                var groupParent = overflowWrapper.find(popupOpenerSelector(popupId));\n\n                setTimeout(function() {\n                    if (that.options.openOnClick) {\n                        that._closeChildPopups(rootPopup);\n                    } else {\n                        if ($.isEmptyObject(that._openedPopups)) {\n                            var innerPopup = that._innerPopup(rootPopup);\n                            that._closeParentPopups(innerPopup);\n                        } else {\n                            that.close(groupParent, true);\n                        }\n                    }\n                }, 0);\n            }\n        },\n\n        _closeChildPopups: function(current) {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n            $(getChildPopups(current, overflowWrapper)).each(function() {\n                var popupOpener = overflowWrapper.find(popupOpenerSelector(this.data(POPUP_ID_ATTR)));\n                that.close(popupOpener, true);\n            });\n        },\n\n        _innerPopup: function(current) {\n            var overflowWrapper = this._overflowWrapper();\n            var popups = getChildPopups(current, overflowWrapper);\n            return popups[popups.length - 1] || current;\n        },\n\n        _closeParentPopups: function(current) {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n            var popupId = current.data(POPUP_ID_ATTR);\n            var popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n            popupId = popupOpener.parent().data(POPUP_ID_ATTR);\n            that.close(popupOpener, true);\n            while (popupId && !that._openedPopups[popupId]) {\n                if (popupOpener.parent().is(menuSelector)) {\n                    break;\n                }\n                popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n                that.close(popupOpener, true);\n                popupId = popupOpener.parent().data(POPUP_ID_ATTR);\n            }\n        },\n\n        _click: function(e) {\n            var that = this, openHandle,\n                options = that.options,\n                target = $(kendo.eventTarget(e)),\n                targetElement = target[0],\n                nodeName = target[0] ? target[0].nodeName.toUpperCase() : \"\",\n                formNode = (nodeName == \"INPUT\" || nodeName == \"SELECT\" || nodeName == \"BUTTON\" || nodeName == \"LABEL\"),\n                link = target.closest(LINK_SELECTOR),\n                element = target.closest(allItemsSelector),\n                itemElement = element[0],\n                href = link.attr(\"href\"), childGroup, childGroupVisible,\n                targetHref = target.attr(\"href\"),\n                sampleHref = $(\"<a href='#' />\").attr(\"href\"),\n                isLink = (!!href && href !== sampleHref),\n                isLocalLink = isLink && !!href.match(/^#/),\n                isTargetLink = (!!targetHref && targetHref !== sampleHref),\n                overflowWrapper = that._overflowWrapper(),\n                shouldCloseTheRootItem;\n\n            if (targetElement && (!targetElement.parentNode || !itemElement)) {\n                return;\n            }\n\n            if ($(target).hasClass('k-menu-expand-arrow-icon')) {\n                this._lastClickedElement = itemElement;\n            }\n\n            while (targetElement && targetElement.parentNode != itemElement) {\n                targetElement = targetElement.parentNode;\n            }\n\n            if ($(targetElement).is(templateSelector)) {\n                return;\n            }\n\n            if (element.hasClass(DISABLEDSTATE)) {\n                e.preventDefault();\n                return;\n            }\n\n            if (!e.handled && that._triggerSelect(target, itemElement) && !formNode) { // We shouldn't stop propagation and shoudn't prevent form elements.\n                e.preventDefault();\n            }\n\n            e.handled = true;\n\n            childGroup = element.children(popupSelector);\n            if (overflowWrapper) {\n                var childPopupId = element.data(POPUP_OPENER_ATTR);\n                if (childPopupId) {\n                    childGroup = overflowWrapper.find(popupGroupSelector(childPopupId));\n                }\n            }\n            childGroupVisible = childGroup.is(\":visible\");\n            shouldCloseTheRootItem = options.openOnClick && childGroupVisible && that._isRootItem(element);\n\n            if (options.closeOnClick && (!isLink || isLocalLink) && (!childGroup.length || shouldCloseTheRootItem)) {\n                element.removeClass(HOVERSTATE).css(\"height\"); // Force refresh for Chrome\n                that._oldHoverItem = that._findRootParent(element);\n                var item = that._parentsUntil(link, that.element, allItemsSelector);\n                that._forceClose = !!overflowWrapper;\n                that.close(item);\n                that.clicked = false;\n                if (\"MSPointerUp\".indexOf(e.type) != -1) {\n                    e.preventDefault();\n                }\n                return;\n            }\n\n            if (isLink && e.enterKey) {\n                link[0].click();\n            }\n\n            if (((!that._isRootItem(element) || options.openOnClick === false) && !options.openOnClick.subMenuItems) && !kendo.support.touch && !(isPointerTouch(e) && that._isRootItem(element.closest(allItemsSelector)))) {\n                return;\n            }\n\n            if (!isLink && !formNode && !isTargetLink) {\n                e.preventDefault();\n            }\n\n            that.clicked = true;\n            openHandle = childGroup.is(\":visible\") ? CLOSE : OPEN;\n            if (!options.closeOnClick && openHandle == CLOSE) {\n                return;\n            }\n            that[openHandle](element);\n        },\n\n        _parentsUntil: function(context, top, selector) {\n            var overflowWrapper = this._overflowWrapper();\n            if (!overflowWrapper) {\n                return context.parentsUntil(top, selector);\n            } else {\n                var parents = overflowMenuParents(context, overflowWrapper);\n                var result = [];\n                $(parents).each(function() {\n                    var parent = $(this);\n                    if (parent.is(top)) {\n                        return false;\n                    }\n                    if (parent.is(selector)) {\n                        result.push(this);\n                    }\n                });\n                return $(result);\n            }\n        },\n\n        _triggerSelect: function(target, itemElement) {\n            target = target.is(\".k-link\") ? target : target.closest(\".k-link\");\n\n            var selectHandler = target.data(\"selectHandler\"),\n                itemSelectEventData;\n\n            if (selectHandler) {\n                itemSelectEventData = this._getEventData(target);\n                selectHandler.call(this, itemSelectEventData);\n            }\n\n            var isSelectItemDefaultPrevented = itemSelectEventData && itemSelectEventData.isDefaultPrevented();\n            var isSelectDefaultPrevented = this._triggerEvent({ item: itemElement, type: SELECT });\n            return isSelectItemDefaultPrevented || isSelectDefaultPrevented;\n        },\n\n        _getEventData: function(target) {\n            var eventData = {\n                sender: this,\n                target: target,\n                _defaultPrevented: false,\n                preventDefault: function() {\n                    this._defaultPrevented = true;\n                },\n                isDefaultPrevented: function() {\n                    return this._defaultPrevented;\n                }\n            };\n            return eventData;\n        },\n\n        _documentClick: function(e) {\n            var that = this;\n            var target = $(e.target).hasClass('k-menu-expand-arrow-icon') ? that._lastClickedElement : e.target;\n\n            if (contains((that._overflowWrapper() || that.element)[0], target)) {\n                that._lastClickedElement = undefined$1;\n                return;\n            }\n\n            that.clicked = false;\n        },\n\n        _focus: function(e) {\n            var that = this,\n                target = e.target,\n                hoverItem = that._hoverItem(),\n                active = activeElement();\n\n            if (target != that.wrapper[0] && !$(target).is(\":kendoFocusable\")) {\n                e.stopPropagation();\n                $(target).closest(\".k-content\").closest(\".k-menu-group\").closest(\".k-item\").addClass(FOCUSEDSTATE);\n                that.wrapper.trigger(\"focus\");\n                return;\n            }\n\n            if (active === e.currentTarget) {\n                if (hoverItem.length) {\n                    that._moveHover([], hoverItem);\n                } else if (!that._oldHoverItem) {\n                    that._moveHover([], that.wrapper.children().first());\n                }\n            }\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                hoverItem = that._oldHoverItem,\n                target,\n                belongsToVertical,\n                hasChildren,\n                isRtl = kendo.support.isRtl(that.wrapper);\n\n            if (e.target != e.currentTarget && key != keys.ESC) {\n                return;\n            }\n\n            if (!hoverItem) {\n                hoverItem = that._oldHoverItem = that._hoverItem();\n            }\n\n            belongsToVertical = that._itemBelongsToVertival(hoverItem);\n            hasChildren = that._itemHasChildren(hoverItem);\n            that._keyTriggered = true;\n\n            if (key == keys.RIGHT) {\n                target = that[isRtl ? \"_itemLeft\" : \"_itemRight\"](hoverItem, belongsToVertical, hasChildren);\n            } else if (key == keys.LEFT) {\n                target = that[isRtl ? \"_itemRight\" : \"_itemLeft\"](hoverItem, belongsToVertical, hasChildren);\n            } else if (key == keys.DOWN) {\n                target = that._itemDown(hoverItem, belongsToVertical, hasChildren);\n            } else if (key == keys.UP) {\n                target = that._itemUp(hoverItem, belongsToVertical, hasChildren);\n            } else if (key == keys.HOME) {\n                that._moveHover(hoverItem, hoverItem.parent().children().first());\n                e.preventDefault();\n            } else if (key == keys.END) {\n                that._moveHover(hoverItem, hoverItem.parent().children().last());\n                e.preventDefault();\n            } else if (key == keys.ESC) {\n                target = that._itemEsc(hoverItem, belongsToVertical);\n            } else if (key == keys.ENTER || key == keys.SPACEBAR) {\n                target = hoverItem.children(\".k-link\");\n                if (target.length > 0) {\n                    that._click({ target: target[0], preventDefault: function() {}, enterKey: true });\n                    if (hasChildren && !hoverItem.hasClass(DISABLEDSTATE)) {\n                        that.open(hoverItem);\n                        that._moveHover(hoverItem, that._childPopupElement(hoverItem).children().first());\n                    } else if (hoverItem.is(\"li\") && hoverItem.attr(\"role\") === \"menuitemcheckbox\") {\n                        hoverItem.find(\".k-checkbox\").attr(\"checked\", true);\n                    } else {\n                        that._moveHoverToRoot(hoverItem, that._findRootParent(hoverItem));\n                    }\n                }\n            } else if (key == keys.TAB) {\n                target = that._findRootParent(hoverItem);\n                that._moveHover(hoverItem, target);\n                that._checkActiveElement();\n                return;\n            }\n\n            if (target && target[0]) {\n                e.preventDefault();\n                e.stopPropagation(); // needed to handle ESC in column menu only when a root item is focused\n            }\n        },\n\n        _hoverItem: function() {\n            return this.wrapper.find(\".k-item.k-hover,.k-item.k-focus\").filter(\":visible\");\n        },\n\n        _itemBelongsToVertival: function(item) {\n            var menuIsVertical = this.wrapper.hasClass(\"k-menu-vertical\");\n\n            if (!item.length) {\n                return menuIsVertical;\n            }\n            return item.parent().hasClass(\"k-menu-group\") || menuIsVertical;\n        },\n\n        _itemHasChildren: function(item) {\n            if (!item || !item.length || !item[0].nodeType) {\n                return false;\n            }\n            return item.children(\".k-menu-group, div.k-animation-container\").length > 0 ||\n                (!!item.data(POPUP_OPENER_ATTR) && !!this._overflowWrapper().children(popupGroupSelector(item.data(POPUP_OPENER_ATTR))));\n        },\n\n        _moveHover: function(item, nextItem) {\n            var that = this,\n                id = that._ariaId;\n\n            if (item.length && nextItem.length) {\n                item.removeClass(FOCUSEDSTATE);\n            }\n\n            if (nextItem.length) {\n                if (nextItem[0].id) {\n                    id = nextItem[0].id;\n                }\n\n                nextItem.addClass(FOCUSEDSTATE);\n                that._oldHoverItem = nextItem;\n\n                if (id) {\n                    that.element.removeAttr(\"aria-activedescendant\");\n                    $(\"#\" + id).removeAttr(\"id\");\n                    nextItem.attr(\"id\", id);\n                    that.element.attr(\"aria-activedescendant\", id);\n                }\n                that._scrollToItem(nextItem);\n            }\n        },\n\n        _moveHoverToRoot: function(item, nextItem) {\n            this._moveHover(item, nextItem);\n        },\n\n        _findRootParent: function(item) {\n            if (this._isRootItem(item)) {\n                return item;\n            } else {\n                return this._parentsUntil(item, menuSelector, \"li.k-item\").last();\n            }\n        },\n\n        _isRootItem: function(item) {\n            return item.parent().hasClass(MENU);\n        },\n\n        _itemRight: function(item, belongsToVertical, hasChildren) {\n            var that = this,\n                nextItem,\n                parentItem,\n                overflowWrapper;\n\n            if (!belongsToVertical) {\n                nextItem = item.nextAll(itemSelector + exclusionSelector).eq(0);\n                if (!nextItem.length) {\n                    nextItem = item.prevAll(itemSelector + exclusionSelector).last();\n                }\n                that.close(item);\n            } else if (hasChildren && !item.hasClass(DISABLEDSTATE)) {\n                that.open(item);\n                nextItem = that._childPopupElement(item).children().first();\n            } else if (that.options.orientation == \"horizontal\") {\n                parentItem = that._findRootParent(item);\n                overflowWrapper = that._overflowWrapper();\n                if (overflowWrapper) {\n                    var rootPopup = itemPopup(parentItem, overflowWrapper);\n                    that._closeChildPopups(rootPopup);\n                }\n                that.close(parentItem);\n                nextItem = parentItem.nextAll(itemSelector + exclusionSelector).eq(0);\n            }\n\n            if (nextItem && !nextItem.length) {\n                nextItem = that.wrapper.children(\".k-item\").first();\n            } else if (!nextItem) {\n                nextItem = [];\n            }\n\n            that._moveHover(item, nextItem);\n            return nextItem;\n        },\n\n        _itemLeft: function(item, belongsToVertical) {\n            var that = this,\n                nextItem,\n                overflowWrapper;\n\n            if (!belongsToVertical) {\n                nextItem = item.prevAll(itemSelector + exclusionSelector).eq(0);\n                if (!nextItem.length) {\n                    nextItem = item.nextAll(itemSelector + exclusionSelector).last();\n                }\n                that.close(item);\n            } else {\n                nextItem = item.parent().closest(\".k-item\");\n                overflowWrapper = that._overflowWrapper();\n                if (!nextItem.length && overflowWrapper) {\n                    nextItem = popupParentItem(item.parent(), overflowWrapper);\n                }\n                that.close(nextItem);\n                if (that._isRootItem(nextItem) && that.options.orientation == \"horizontal\") {\n                    nextItem = nextItem.prevAll(itemSelector + exclusionSelector).eq(0);\n                }\n            }\n\n            if (!nextItem.length) {\n                nextItem = that.wrapper.children(\".k-item\").last();\n            }\n\n            that._moveHover(item, nextItem);\n            return nextItem;\n        },\n\n        _itemDown: function(item, belongsToVertical, hasChildren) {\n            var that = this,\n                nextItem;\n\n            if (!belongsToVertical) {\n                if (!hasChildren || item.hasClass(DISABLEDSTATE)) {\n                    return;\n                } else {\n                    that.open(item);\n                    nextItem = that._childPopupElement(item).children().first();\n                }\n            } else {\n                nextItem = item.nextAll(itemSelector + exclusionSelector).eq(0);\n            }\n\n            if (!nextItem.length && item.length) {\n                nextItem = item.parent().children().first();\n            } else if (!item.length) {\n                nextItem = that.wrapper.children(\".k-item\").first();\n            }\n\n            that._moveHover(item, nextItem);\n            return nextItem;\n        },\n\n        _itemUp: function(item, belongsToVertical) {\n            var that = this,\n                nextItem;\n\n            if (!belongsToVertical) {\n                return;\n            } else {\n                nextItem = item.prevAll(itemSelector + exclusionSelector).eq(0);\n            }\n\n            if (!nextItem.length && item.length) {\n                nextItem = item.parent().children().last();\n            } else if (!item.length) {\n                nextItem = that.wrapper.children(\".k-item\").last();\n            }\n\n            that._moveHover(item, nextItem);\n            return nextItem;\n        },\n\n        _scrollToItem: function(item) {\n            var that = this;\n            if (that.options.scrollable && item && item.length) {\n                var ul = item.parent();\n                var isHorizontal = ul.hasClass(MENU) ? that.options.orientation == \"horizontal\" : false;\n                var scrollDir = isHorizontal ? \"scrollLeft\" : \"scrollTop\";\n                var getSize = isHorizontal ? kendo._outerWidth : kendo._outerHeight;\n                var currentScrollOffset = ul[scrollDir]();\n                var itemSize = getSize(item);\n                var itemOffset = item[0][isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                var ulSize = getSize(ul);\n                var scrollButtons = ul.siblings(scrollButtonSelector);\n                var scrollButtonSize = scrollButtons.length ? getSize(scrollButtons.first()) : 0;\n                var itemPosition;\n\n                if (currentScrollOffset + ulSize < itemOffset + itemSize + scrollButtonSize) {\n                    itemPosition = itemOffset + itemSize - ulSize + scrollButtonSize;\n                } else if (currentScrollOffset > itemOffset - scrollButtonSize) {\n                    itemPosition = itemOffset - scrollButtonSize;\n                }\n\n                if (!isNaN(itemPosition)) {\n                    var scrolling = {};\n                    scrolling[scrollDir] = itemPosition;\n                    ul.finish().animate(scrolling, \"fast\", \"linear\", function() {\n                        that._toggleScrollButtons(ul, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                    });\n                }\n            }\n        },\n\n        _itemEsc: function(item, belongsToVertical) {\n            var that = this,\n                nextItem, groupId;\n\n            if (!belongsToVertical) {\n                return item;\n            } else {\n                nextItem = item.parent().closest(\".k-item\");\n\n                if (nextItem.length === 0) {\n                    groupId = item.closest(\".k-group\").data(\"group\");\n                    nextItem = that.wrapper.find(\".k-item[data-groupparent='\" + groupId + \"']\");\n                }\n\n                that.close(nextItem);\n                that._moveHover(item, nextItem);\n            }\n\n            return nextItem;\n        },\n\n        _childPopupElement: function(item) {\n            var popupElement = item.find(\".k-menu-group\");\n            var wrapper = this._overflowWrapper();\n            if (!popupElement.length && wrapper) {\n                popupElement = itemPopup(item, wrapper);\n            }\n            return popupElement;\n        },\n\n        _triggerEvent: function(e) {\n            var that = this;\n\n            return that.trigger(e.type, { type: e.type, item: e.item });\n        },\n\n        _focusHandler: function(e) {\n            var that = this,\n                item = $(kendo.eventTarget(e)).closest(allItemsSelector);\n\n            if (item.hasClass(DISABLEDSTATE)) {\n                return;\n            }\n\n            setTimeout(function() {\n                that._moveHover([], item);\n                if (item.children(\".k-content\")[0]) {\n                    item.parent().closest(\".k-item\").removeClass(FOCUSEDSTATE);\n                }\n            }, 200);\n        },\n\n        _animations: function(options) {\n            if (options && (\"animation\" in options) && !options.animation) {\n                options.animation = { open: { effects: {} }, close: { hide: true, effects: {} } };\n            }\n        },\n        _dataSource: function(options) {\n            var that = this,\n                dataSource = options ? options.dataSource : that.options.dataSource;\n\n            if (!dataSource) {\n                return;\n            }\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            that._unbindDataSource();\n\n            if (!dataSource.fields) {\n                dataSource.fields = [\n                    { field: \"uid\" },\n                    { field: \"text\" },\n                    { field: \"url\" },\n                    { field: \"cssClass\" },\n                    { field: \"spriteCssClass\" },\n                    { field: \"imageUrl\" },\n                    { field: \"imageAttr\" },\n                    { field: \"attr\" },\n                    { field: \"contentAttr\" },\n                    { field: \"content\" },\n                    { field: \"encoded\" },\n                    { field: \"items\" },\n                    { field: \"select\" }\n                ];\n            }\n\n            that.dataSource = HierarchicalDataSource.create(dataSource);\n\n            that._bindDataSource();\n\n            that.dataSource.fetch();\n        },\n\n        _bindDataSource: function() {\n            this._refreshHandler = this.refresh.bind(this);\n            this._errorHandler = this._error.bind(this);\n\n            this.dataSource.bind(CHANGE, this._refreshHandler);\n            this.dataSource.bind(ERROR, this._errorHandler);\n        },\n\n        _unbindDataSource: function() {\n            var dataSource = this.dataSource;\n\n            if (dataSource) {\n                dataSource.unbind(CHANGE, this._refreshHandler);\n                dataSource.unbind(ERROR, this._errorHandler);\n            }\n        },\n\n        _error: function() {\n\n        },\n\n        findByUid: function(uid) {\n            var wrapperElement = this._overflowWrapper() || this.element;\n            return wrapperElement.find(\"[\" + kendo.attr(\"uid\") + \"=\" + uid + \"]\");\n        },\n\n        refresh: function(ev) {\n            var that = this;\n            var node = ev.node;\n            var action = ev.action;\n            var parentElement = node ? that.findByUid(node.uid) : that.element;\n            var itemsToUpdate = ev.items;\n            var index = ev.index;\n            var updateProxy = that._updateItem.bind(that);\n            var removeProxy = that._removeItem.bind(that);\n\n            if (action == \"add\") {\n                that._appendItems(itemsToUpdate, index, parentElement);\n            } else if (action == \"remove\") {\n                itemsToUpdate.forEach(removeProxy);\n            } else if (action == \"itemchange\") {\n                itemsToUpdate.forEach(updateProxy);\n            } else if (action === \"itemloaded\") {\n                that.append(ev.items, parentElement);\n            } else {\n                this._initData();\n            }\n\n            this.trigger(DATABOUND, { item: parentElement, dataItem: node });\n        },\n\n        _appendItems: function(items, index, parent) {\n            var that = this;\n            var referenceItem = parent.find(itemSelector).eq(index);\n\n            if (referenceItem.length) {\n                that.insertBefore(items, referenceItem);\n            } else {\n                that.append(items, parent);\n            }\n        },\n\n        _removeItem: function(item) {\n            var that = this;\n            var element = that.findByUid(item.uid);\n            that.remove(element);\n        },\n\n        _updateItem: function(item) {\n            var that = this;\n            var element = that.findByUid(item.uid);\n            var nextElement = element.next();\n            var parentNode = item.parentNode();\n\n            that.remove(element);\n\n            if (nextElement.length) {\n                that.insertBefore(item, nextElement);\n            } else {\n                that.append(item, parentNode && that.findByUid(parentNode.uid));\n            }\n        },\n\n        _accessors: function() {\n            var that = this,\n                options = that.options,\n                i, field, textField,\n                element = that.element;\n\n            for (i in bindings) {\n                field = options[bindings[i]];\n                textField = element.attr(kendo.attr(i + \"-field\"));\n\n                if (!field && textField) {\n                    field = textField;\n                }\n\n                if (!field) {\n                    field = i;\n                }\n\n                if (!isArray(field)) {\n                    field = [field];\n                }\n\n                options[bindings[i]] = field;\n            }\n        },\n\n        _fieldAccessor: function(fieldName) {\n            var fieldBindings = this.options[bindings[fieldName]] || [],\n                count = fieldBindings.length,\n                result = \"(function(item) {\";\n\n            if (count === 0) {\n                result += \"return item['\" + fieldName + \"'];\";\n            } else {\n                result += \"var levels = [\" +\n                            $.map(fieldBindings, function(x) {\n                                return \"function(d){ return \" + kendo.expr(x) + \"}\";\n                            }).join(\",\") + \"];\";\n                result += \"if(item.level){return levels[Math.min(item.level(), \" + count + \"-1)](item);}else\";\n                result += \"{return levels[\" + count + \"-1](item)}\";\n            }\n\n            result += \"})\";\n\n            return result;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                fieldAccessor = that._fieldAccessor.bind(that);\n\n            if (options.template && typeof options.template == STRING) {\n                    options.template = template(options.template);\n            } else if (!options.template) {\n                    options.template = template(\n                    \"<span class='k-menu-link-text'>\" +\n                    \"# var text = \" + fieldAccessor(\"text\") + \"(data.item); #\" +\n                    \"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#\" +\n                        \"#= text #\" +\n                    \"# } else { #\" +\n                        \"#: text #\" +\n                    \"# } #</span>\"\n                );\n            }\n\n            that.templates = {\n                content: template(\n                    \"#var contentHtml = \" + fieldAccessor(\"content\") + \"(item);#\" +\n                    \"<div #= contentCssAttributes(item.toJSON ? item.toJSON() : item) # tabindex='-1'>#= contentHtml || '' #</div>\"\n                ),\n                group: template(\n                    \"<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>\" +\n                        \"#= renderItems(data) #\" +\n                    \"</ul>\"\n                ),\n                itemWrapper: template(\n                    \"# var url = \" + fieldAccessor(\"url\") + \"(item); #\" +\n                    \"# var imageUrl = \" + fieldAccessor(\"imageUrl\") + \"(item); #\" +\n                    \"# var imgAttributes = \" + fieldAccessor(\"imageAttr\") + \"(item);#\" +\n                    \"# var tag = url ? 'a' : 'span' #\" +\n                    \"<#= tag # class='#= textClass(item) #' #if(url){#href='#= url #'#}#>\" +\n\n                    \"# if (imageUrl) { #\" +\n                              \"<img #= imageCssAttributes(imgAttributes) #  alt='' src='#= imageUrl #' />\" +\n                    \"# } #\" +\n\n                    \"#= sprite(item) #\" +\n                    \"#= data.menu.options.template(data) #\" +\n                    \"#= arrow(data) #\" +\n                    \"</#= tag #>\"\n                ),\n                item: template(\n                    \"#var contentHtml = \" + fieldAccessor(\"content\") + \"(item);#\" +\n                    \"<li class='#= wrapperCssClass(group, item) #' #= itemCssAttributes(item.toJSON ? item.toJSON() : item) # role='menuitem'  #=item.items ? \\\"aria-haspopup='true'\\\": \\\"\\\"#\" +\n                        \"#=item.enabled === false ? \\\"aria-disabled='true'\\\" : ''#\" +\n                        kendo.attr(\"uid\") + \"='#= item.uid #' \" +\n                        \"# if(item.items && item.items.length > 0) { # \" +\n                            \"# if(item.expanded) { # \" +\n                                \" aria-expanded='true'\" +\n                            \"# } else { #\" +\n                                \" aria-expanded='false'\" +\n                            \"# } #\" +\n                        \"# } #\" +\n                    \">\" +\n                        \"#= itemWrapper(data) #\" +\n                        \"#if (item.hasChildren || item.items) { #\" +\n                            \"#= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) #\" +\n                        \"# } else if (item.content || item.contentUrl || contentHtml) { #\" +\n                            \"#= renderContent(data) #\" +\n                        \"# } #\" +\n                    \"</li>\"\n                ),\n                scrollButton: template(\n                    \"<span class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-menu-scroll-button k-scroll-#= direction #' unselectable='on'>\" +\n                        \"<span class='k-button-icon k-icon k-i-arrow-60-#= direction #'></span>\" +\n                    \"</span>\"\n                ),\n                arrow: template(\"<span aria-hidden='true' class='k-menu-expand-arrow'><span class='#= arrowClass(item, group) #'></span></span>\"),\n                sprite: template(\"# var spriteCssClass = \" + fieldAccessor(\"spriteCssClass\") + \"(data); if(spriteCssClass) {#<span class='k-sprite #= spriteCssClass #'></span>#}#\"),\n                empty: template(\"\")\n            };\n        },\n\n        renderItem: function(options) {\n            var that = this;\n            options = extend({ menu: that, group: {} }, options);\n\n            var empty = that.templates.empty,\n                item = options.item;\n\n            return that.templates.item(extend(options, {\n                sprite: that.templates.sprite,\n                itemWrapper: that.templates.itemWrapper,\n                renderContent: that.renderContent,\n                arrow: item.items || item.content || item[that.options.dataContentField[0]] ? that.templates.arrow : empty,\n                subGroup: that.renderGroup\n            }, rendering));\n        },\n\n        renderGroup: function(options) {\n            var that = this;\n            var templates = that.templates || options.menu.templates;\n\n            return templates.group(extend({\n                renderItems: function(options) {\n                    var html = \"\",\n                        i = 0,\n                        items = options.items,\n                        len = items ? items.length : 0,\n                        group = extend({ length: len }, options.group);\n\n                    for (; i < len; i++) {\n                        html += options.menu.renderItem(extend(options, {\n                            group: group,\n                            item: extend({ index: i }, items[i])\n                        }));\n                    }\n\n                    return html;\n                }\n            }, options, rendering));\n        },\n\n        renderContent: function(options) {\n            return options.menu.templates.content(extend(options, rendering));\n        }\n    });\n\n    var ContextMenu = Menu.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Menu.fn.init.call(that, element, options);\n\n            that.element.attr(ROLE, \"menu\");\n\n            that._marker = kendo.guid().substring(0, 8);\n\n            that.target = $(that.options.target);\n\n            that._popup();\n            that._wire();\n        },\n\n        _initOverflow: function(options) {\n            var that = this;\n            if (options.scrollable && !that._overflowWrapper()) {\n                that._openedPopups = {};\n\n                that._popupsWrapper = (that.element.parent().is(animationContainerSelector) ? that.element.parent() : that.element)\n                    .wrap(\"<div class='k-popups-wrapper \" + options.orientation + \"'></div>\").parent();\n\n                if (that.options.orientation == \"horizontal\") {\n                    removeSpacesBetweenItems(that.element);\n                }\n\n                if (options.appendTo) {\n                    options.appendTo = $(options.appendTo);\n                    options.appendTo.append(that._popupsWrapper);\n                }\n\n                that._initialHeight = that.element[0].style.height;\n                that._initialWidth = that.element[0].style.width;\n            }\n        },\n\n        options: {\n            name: \"ContextMenu\",\n            filter: null,\n            showOn: \"contextmenu\",\n            orientation: \"vertical\",\n            alignToAnchor: false,\n            copyAnchorStyles: true,\n            target: \"body\"\n        },\n\n        events: [\n            OPEN,\n            CLOSE,\n            ACTIVATE,\n            DEACTIVATE,\n            SELECT\n        ],\n\n        setOptions: function(options) {\n            var that = this;\n\n            Menu.fn.setOptions.call(that, options);\n\n            that.target.off(that.showOn + NS + that._marker, that._showProxy);\n\n            if (that.userEvents) {\n                that.userEvents.destroy();\n            }\n\n            that.target = $(that.options.target);\n            if (options.orientation && that.popup.wrapper[0]) {\n                that.popup.element.unwrap();\n            }\n\n            that._wire();\n\n            Menu.fn.setOptions.call(this, options);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.target.off(that.options.showOn + NS + that._marker);\n            DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n\n            if (that.userEvents) {\n                that.userEvents.destroy();\n            }\n\n            Menu.fn.destroy.call(that);\n        },\n\n        open: function(x, y) {\n            var that = this;\n\n            x = $(x)[0];\n\n            if (contains(that.element[0], $(x)[0]) || that._itemHasChildren($(x))) { // call parent open for children elements\n                Menu.fn.open.call(that, x);\n            } else {\n                if (that._triggerEvent({ item: that.element, type: OPEN }) === false) {\n                    if (that.popup.visible() && that.options.filter) {\n                        that.popup.close(true);\n                        that.popup.element.kendoStop(true);\n                    }\n\n                    if (y !== undefined$1) {\n                        var overflowWrapper = that._overflowWrapper();\n                        if (overflowWrapper) {\n                            var offset = overflowWrapper.offset();\n                            x -= offset.left;\n                            y -= offset.top;\n                        }\n                        that.popup.wrapper.hide();\n                        that._configurePopupScrolling(x, y);\n                        that.popup.open(x, y);\n                    } else {\n                        that.popup.options.anchor = (x ? x : that.popup.anchor) || that.target;\n                        that.popup.element.kendoStop(true);\n                        that._configurePopupScrolling();\n                        that.popup.open();\n                    }\n\n                    DOCUMENT_ELEMENT.off(that.popup.downEvent, that.popup._mousedownProxy);\n                    DOCUMENT_ELEMENT\n                        .on(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n\n                    that.element.trigger(\"focus\");\n                }\n            }\n\n            return that;\n        },\n\n        _configurePopupScrolling: function(x, y) {\n            var that = this;\n            var popup = that.popup;\n            var isHorizontal = that.options.orientation == \"horizontal\";\n\n            if (that.options.scrollable) {\n                that._wrapPopupElement(popup);\n\n                popup.element.parent().css({\n                    position: \"\",\n                    height: \"\"\n                });\n\n                popup.element.css({\n                    visibility: \"hidden\",\n                    display: \"\",\n                    position: \"\"\n                });\n\n                if (isHorizontal) {\n                    that._setPopupWidth(popup, isNaN(x) ? undefined$1 : { isFixed: true, x: x, y: y });\n                } else {\n                    that._setPopupHeight(popup, isNaN(x) ? undefined$1 : { isFixed: true, x: x, y: y });\n                }\n\n                popup.element.css({\n                    visibility: \"\",\n                    display: \"none\",\n                    position: \"absolute\"\n                });\n\n                that._initPopupScrollButtons(popup, isHorizontal, true);\n                popup.element.siblings(scrollButtonSelector).hide();\n            }\n        },\n\n        _setPopupWidth: function(popup, isFixed) {\n            var popupElement = popup.element;\n            var popups = popupElement.add(popupElement.parent(animationContainerSelector));\n\n            popups.width(this._initialWidth || \"\");\n\n            var location = popup._location(isFixed);\n            var windowWidth = $(window).width();\n            var popupOuterWidth = location.width;\n            var popupOffsetLeft = Math.max(location.left, 0);\n            var scrollLeft = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], \"scrollLeft\");\n            var shadow = kendo.getShadows(popupElement);\n            var maxWidth = windowWidth - shadow.left - shadow.right;\n            var canFit = maxWidth + scrollLeft > popupOuterWidth + popupOffsetLeft;\n\n            if (!canFit) {\n                popups.css({ overflow: \"hidden\", width: (maxWidth - popupOffsetLeft + scrollLeft) + \"px\" });\n            }\n        },\n\n        close: function() {\n            var that = this;\n\n            if (contains(that.element[0], $(arguments[0])[0]) || that._itemHasChildren(arguments[0])) {\n                Menu.fn.close.call(that, arguments[0]);\n            } else {\n                if (that.popup.visible()) {\n                    if (that._triggerEvent({ item: that.element, type: CLOSE }) === false) {\n                        that._removeHoverItem();\n                        that.element.find(\"#\" + that._ariaId).removeAttr(\"id\");\n                        that.popup.close();\n                        DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                        that.unbind(SELECT, that._closeTimeoutProxy);\n                        that.popup.options.anchor.focus();\n                    }\n                }\n            }\n        },\n\n        _showHandler: function(e) {\n            var ev = e, offset,\n                that = this,\n                options = that.options,\n                target = kendo.support.mobileOS ? $(ev.target) : $(ev.currentTarget);\n\n            if (e.event) {\n                ev = e.event;\n                ev.pageX = e.x.location;\n                ev.pageY = e.y.location;\n            }\n\n            if (contains(that.element[0], e.relatedTarget || e.target)) {\n                return;\n            }\n\n            that._eventOrigin = ev;\n\n            ev.preventDefault();\n            ev.stopImmediatePropagation();\n\n            that.element.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n            if ((options.filter && target.is(options.filter)) || !options.filter) {\n                if (options.alignToAnchor) {\n                    that.popup.options.anchor = ev.currentTarget;\n                    that.open(ev.currentTarget);\n                } else {\n                    that.popup.options.anchor = ev.currentTarget;\n\n                    if (that._targetChild) {\n                        offset = that.target.offset();\n                        that.open(ev.pageX - offset.left, ev.pageY - offset.top);\n                    } else {\n                        that.open(ev.pageX, ev.pageY);\n                    }\n                }\n            }\n        },\n\n        _closeHandler: function(e) {\n            var that = this,\n                target = $(e.relatedTarget || e.target),\n                sameTarget = target.closest(that.target.selector)[0] == that.target[0],\n                item = target.closest(itemSelector),\n                children = that._itemHasChildren(item),\n                overflowWrapper = that._overflowWrapper(),\n                containment = contains(that.element[0], target[0]) || (overflowWrapper && contains(overflowWrapper[0], target[0]));\n\n            that._eventOrigin = e;\n\n            var normalClick = e.which !== 3;\n\n            if (that.popup.visible() && ((normalClick && sameTarget) || !sameTarget) && ((that.options.closeOnClick && !children && containment) || !containment)) {\n                if (containment) {\n                    this.unbind(SELECT, this._closeTimeoutProxy);\n                    that.bind(SELECT, that._closeTimeoutProxy);\n                } else {\n                    that.close();\n                }\n            }\n        },\n\n        _wire: function() {\n            var that = this,\n                options = that.options,\n                target = that.target;\n\n            that._preventProxy = null;\n            that._showProxy = that._showHandler.bind(that);\n            that._closeProxy = that._closeHandler.bind(that);\n            that._closeTimeoutProxy = that.close.bind(that);\n\n            if (target[0]) {\n                if (kendo.support.mobileOS && options.showOn == \"contextmenu\") {\n                    that.userEvents = new kendo.UserEvents(target, {\n                        filter: options.filter,\n                        allowSelection: false\n                    });\n\n                    that._preventProxy = function() { return false; };\n\n                    that.userEvents.bind(\"hold\", that._showProxy);\n                }\n\n                if (options.filter) {\n                    target.on(options.showOn + NS + that._marker, options.filter, that._preventProxy || that._showProxy);\n                } else {\n                    target.on(options.showOn + NS + that._marker, that._preventProxy || that._showProxy);\n                }\n\n                target.on(\"keydown\", (e) => {\n                    if (e.keyCode === kendo.keys.F10 && e.shiftKey) {\n                        e.preventDefault();\n                        that.open(e.target);\n                    }\n                });\n            }\n        },\n\n        _triggerEvent: function(e) {\n            var that = this,\n                anchor = $(that.popup.options.anchor)[0],\n                origin = that._eventOrigin;\n\n            that._eventOrigin = undefined$1;\n\n            return that.trigger(e.type, extend({ type: e.type, item: e.item || this.element[0], target: anchor }, origin ? { event: origin } : {} ));\n        },\n\n        _popup: function() {\n            var that = this;\n            var overflowWrapper = that._overflowWrapper();\n\n            that._triggerProxy = that._triggerEvent.bind(that);\n\n            that.popup = that.element\n                            .addClass(\"k-context-menu\")\n                            .kendoPopup({\n                                autosize: that.options.orientation === \"horizontal\",\n                                anchor: that.target || \"body\",\n                                copyAnchorStyles: that.options.copyAnchorStyles,\n                                collision: that.options.popupCollision || \"fit\",\n                                animation: that.options.animation,\n                                activate: that._triggerProxy,\n                                deactivate: that._triggerProxy,\n                                appendTo: overflowWrapper || that.options.appendTo,\n                                close: !overflowWrapper ? $.noop : function(e) {\n                                    $(getChildPopups(e.sender.element, overflowWrapper)).each(function(i, p) {\n                                        var popup = p.data(KENDOPOPUP);\n                                        if (popup) {\n                                            popup.close(true);\n                                        }\n                                    });\n                                }\n                            }).data(KENDOPOPUP);\n\n            that._targetChild = contains(that.target[0], that.popup.element[0]);\n        },\n\n        _moveHoverToRoot: function(item, nextItem) {\n            this._moveHover(item, nextItem);\n            this.close();\n        },\n\n        _focus: function(e) {\n            var hoverItem = this._oldHoverItem = this._hoverItem() || [];\n\n            Menu.fn._focus.call(this, e);\n\n            if (activeElement() === e.currentTarget) {\n                this._moveHover(hoverItem, this.wrapper.children().first());\n            }\n        }\n    });\n\n    ui.plugin(Menu);\n    ui.plugin(ContextMenu);\n\n})(window.kendo.jQuery);\n"]}